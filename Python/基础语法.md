1. [Part1 åŸºç¡€ç±»å‹](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part1-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B)
2. [Part2 å˜é‡](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part2-%E5%8F%98%E9%87%8F)
3. [Part3 è¿ç®—ç¬¦](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part3-%E8%BF%90%E7%AE%97%E7%AC%A6)
4. [Part4 æ§åˆ¶æµç¨‹](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part4-%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B)
5. [Part5 å‡½æ•°](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part5-%E5%87%BD%E6%95%B0)
6. [Part6 å¼‚å¸¸å¤„ç†](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part6-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86)
7. [Part7 åŒ…å’Œæ¨¡å—](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part7-%E5%8C%85%E5%92%8C%E6%A8%A1%E5%9D%97)
8. [Part8 é¢å‘å¯¹è±¡](https://github.com/hsxhr-10/Blog/blob/master/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.md#part8-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1)

# Part1 åŸºç¡€ç±»å‹

## æ•´å‹

### æ•´å‹æŒ‡çš„å®šä¹‰

æ•´å‹æŒ‡çš„æ˜¯è´Ÿæ•´æ•°ã€0ã€æ­£æ•´æ•°ï¼Œåº•å±‚æ˜¯ C å®ç°ã€‚Python2.x ä¼šç”¨ `long` ç±»å‹æ¥å­˜å‚¨å¤§æ•´å‹ï¼Œè€Œ Python3.x åªç”¨ `int` ä¸€ç§ç±»å‹å­˜å‚¨æ•´å‹ï¼Œæ— è®ºå¤§å°

### ä¸åŒè¿›åˆ¶çš„æ•´å‹è¡¨ç¤ºæ³•

- äºŒè¿›åˆ¶ 0b...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `bin()`
- å…«è¿›åˆ¶ 0o...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `oct()`
- åå…­è¿›åˆ¶ 0x...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `hex()` 

### ç”¨åˆ†éš”ç¬¦å¢å¼ºå¯è¯»æ€§

ä» Python3.x å¼€å§‹æ”¯æŒç”¨ `_` æ¥åˆ†å‰²å¾ˆé•¿çš„æ•´å‹ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œå¦‚ï¼š`a = 1_000_000_000_000_000_000_000`

### æ›´è¿›ä¸€æ­¥

#### å°æ•´å‹å¯¹è±¡

Python ä¸­çš„ int å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”ä¸€ä¸ª C çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸” Python çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åœ¨å †ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šåªè¦åˆ›å»ºä¸€æ¬¡
æ•´å‹ï¼Œå°±éœ€è¦ç›¸åº”çš„ `malloc` å’Œ `free`ï¼Œè¿™äº›æ“ä½œå¦‚æœè¿‡äºé¢‘ç¹ä¼šé™ä½ç¨‹åºçš„æ•ˆç‡ã€‚å¯¹äº [-5, 257) è¿™ä¸ªèŒƒå›´çš„å°æ•´å‹ï¼Œ
Python çš„è®¾è®¡è€…ä»¬è€ƒè™‘åˆ°å®ƒä»¬å¯èƒ½ä¼šè¢«é¢‘ç¹çš„ä½¿ç”¨ï¼Œå› æ­¤ï¼ŒPython è¿è¡Œæ—¶ä¼šåœ¨ä¸€å¼€å§‹å°±åˆ›å»ºå¥½è¿™äº›æ•´å‹æ•°å­—å¯¹åº”çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ”¾åˆ°ä¸€ä¸ªç¼“å­˜æ± ä¸­ï¼Œ
æ¯æ¬¡éœ€è¦çš„æ—¶å€™ï¼Œå†ä»æ± ä¸­è·å–ï¼Œä»¥æ­¤æ¥å‡å°‘ `malloc`ã€`free`ã€Python å¯¹è±¡çš„å›æ”¶çš„æ¬¡æ•°ï¼Œæå‡ Python çš„æ•´ä½“æ€§èƒ½ï¼ˆè™½ç„¶ Python çš„æ€§èƒ½è€è¢«åæ§½ï¼Œä½†æ˜¯è¿™äº›ä¼˜åŒ–ç»†èŠ‚è¿˜æ˜¯ä¸å°‘çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºæ•´å‹çš„ ID éƒ½ä¸€æ ·çš„åŸå› ï¼‰

#### å¤§æ•´å‹å¯¹è±¡ 

å› ä¸ºä¸å¯èƒ½ä¸ºæ¯ä¸€ä¸ªæ•´å‹éƒ½é¢„å…ˆåˆ›å»ºå¥½å¯¹è±¡ï¼Œæ‰€ä»¥ä¸åœ¨ [-5, 257) è¿™ä¸ªèŒƒå›´çš„æ•´å‹å¹¶ä¸ä¼šé¢„å…ˆåˆ›å»ºã€‚Python å¯¹å¤§æ•´å‹å¯¹è±¡çš„ä¼˜åŒ–æ–¹æ³•æ˜¯é¢„å…ˆåˆ’åˆ†å‡ºä¸€å—å†…å­˜ç©ºé—´ï¼Œ
ä¸“é—¨ç”¨äºå¤§æ•´å‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ä¸èƒ½é¢„å…ˆåˆ›å»ºå¥½ï¼Œä½†æ˜¯å†…å­˜æ± è¯¥ä¸Šè¿˜æ˜¯ä¸Šäº†

## æµ®ç‚¹å‹

æµ®ç‚¹ç±»å‹åº•å±‚æ˜¯ C å®ç°

### æµ®ç‚¹å‹çš„è®¡ç®—

ç”±äºå°æ•°ç‚¹åçš„éƒ¨åˆ†åœ¨è½¬æ¢æˆäºŒè¿›åˆ¶æ—¶å¾ˆå¯èƒ½ä¼šæ˜¯ä¸€ä¸²æ— é™å¾ªç¯çš„å°æ•°ï¼Œå› æ­¤å¯¼è‡´ä¸èƒ½ç²¾å‡†è¡¨ç¤ºï¼Œæ‰€ä»¥æµ®ç‚¹çš„è®¡ç®—ä¸€èˆ¬æ˜¯ä¸ç²¾ç¡®çš„

æ¡ˆä¾‹ï¼š

```bash
In [91]: a = 0.29

In [92]: b = 0.29 * 100

In [93]: c = int(b)

In [94]: c
Out[94]: 28
```

æ˜¾ç„¶ä¸æ˜¯é¢„æœŸçš„ç»“æœ

#### è½¬æ¢æˆåˆ†æ•°è®¡ç®—

ä½¿ç”¨ fractions æ¨¡å—å°†å°æ•°è¿ç®—è½¬æ¢æˆåˆ†æ•°è¿ç®—

```bash
In [112]: from fractions import Fraction

In [113]: a = Fraction(29) / Fraction(100)
In [114]: b = a * 100
In [115]: c = int(b)

In [116]: c
Out[116]: 29
```

#### è½¬æ¢æˆå®šç‚¹æ•°è¿ç®—

ä½¿ç”¨ decimal æ¨¡å—è¿›è¡Œæµ®ç‚¹å‹è¿ç®—

```bash
In [117]: from decimal import Decimal

In [118]: a = Decimal("0.29")
In [119]: b = a * 100
In [120]: c = int(b)

In [121]: c
Out[121]: 29
```

decimal è¿˜å¯ä»¥æŒ‡å®šç»“æœä¿ç•™çš„ä¸ªæ•°ï¼Œé»˜è®¤å››èˆäº”ã€‚åˆ†ä¸¤ç§æƒ…å†µï¼Œå½“ç»“æœå°æ•°ç‚¹å‰é 0 æ—¶ï¼Œä¿ç•™çš„ä¸ªæ•°åŒ…æ‹¬æ•´æ•°ä½çš„ä¸ªæ•°ï¼Œå¦‚ä¸‹ï¼š

```BASH
In [130]: import decimal
     ...:
     ...: decimal.getcontext().prec = 5
     ...:
     ...:
     ...: division = decimal.Decimal(77) / decimal.Decimal(3)
     ...: print(division)
25.667
```

å½“å°æ•°ç‚¹å‰æ˜¯ 0 æ—¶ï¼Œç»“æœä¿ç•™ä¸ªæ•°åªåŒ…æ‹¬å°æ•°ä½çš„ä¸ªæ•°ï¼Œå¦‚ä¸‹ï¼š

```BASH
In [4]: import decimal

In [5]: decimal.getcontext().prec = 5
In [6]: division = decimal.Decimal(1) / decimal.Decimal(3)

In [7]: print(division)
0.33333
```

### round() çš„é™·é˜±

æ¡ˆä¾‹ï¼š

```BASH
In [46]: round(11.485, 2)
Out[46]: 11.48
```

é¢„æœŸç»“æœæ˜¯ 11.49ã€‚åŸå› æ˜¯å½“å°æ•°çš„æœ«å°¾æ˜¯ 5ï¼Œè€Œ `round()` åˆšå¥½ä½¿ç”¨æœ«å°¾çš„ 5 è¿›è¡Œå››èˆäº”å…¥æ—¶ï¼Œå°†ä¸ä¼šè¿›è¡Œã€Œäº”å…¥ã€

å¯ä»¥ä½¿ç”¨ decimal æ¨¡å—ä¿®å¤è¿™ç§é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š 

```BASH
In [1]: import decimal

In [2]: res = round(13.485, 2)
In [3]: correct_res = decimal.Decimal(res).quantize(decimal.Decimal('0.00'), rounding=decimal.ROUND_UP)

In [4]: print(correct_res)
13.49
```

## å¸ƒå°”ç±»å‹

å¸ƒå°”ç±»å‹åº•å±‚æ˜¯ C å®ç°

### åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º

æ¯”è¾ƒ Pythonic çš„å†™æ³•æ˜¯ï¼š

```python
lst = []
if not lst:
    print("list is empty")  
```

æ˜¾å¼å†™æ³•æ˜¯ï¼š

```python
lst = []
if len(lst) == 0:
    print("list is empty")
```

## å­—ç¬¦ä¸²ç±»å‹

åº•å±‚æ˜¯ C å®ç°

### Unicode è¡¨ç¤º

Python3.x çš„å­—ç¬¦ä¸²éƒ½æ˜¯ Unicode ç±»å‹ï¼Œå…·ä½“æ¥è¯´å†…éƒ¨ä½¿ç”¨äº†ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥è¡¨ç¤º Unicodeï¼š

- Latin-1 ç¼–ç ï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½åœ¨ ASCII èŒƒå›´å†…ï¼Œåˆ™ä½¿ç”¨è¯¥ç¼–ç 
- UCS-2 ç¼–ç ï¼šå¤§å¤šæ•°çš„éæ‹‰ä¸ç³»çš„å­—ç¬¦ï¼ˆè­¬å¦‚ï¼šæ±‰è¯­ã€æ—¥è¯­ç­‰ï¼‰ï¼Œéƒ½ä¼šä½¿ç”¨è¯¥ç¼–ç 
- UCS-4 ç¼–ç ï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­å«æœ‰ç‰¹æ®Šå­—ç¬¦ã€emojiã€ç¨€æœ‰å­—ç¬¦ç­‰ï¼Œåˆ™ä¼šä½¿ç”¨è¯¥ç¼–ç 

**å­—ç¬¦ä¸²æ‰©å®¹è§„åˆ™ï¼šå¦‚æœä¸€ä¸ª Latin-1 ç¼–ç çš„å­—ç¬¦ä¸²åŠ å…¥äº†ä¸€ä¸ªä¸­æ–‡ï¼Œé‚£ä¹ˆåŸå…ˆçš„ Latin-1 å­—ç¬¦ä¸²æ‰€å çš„å­—èŠ‚æ•°å°†ä¼šå¢åŠ  2 å€ã€‚åŒç†ï¼Œå¦‚æœåŠ å…¥äº†ä¸€ä¸ª emoji è¡¨æƒ…ï¼Œ
æ‰€å çš„å­—èŠ‚å°†ä¼šå¢åŠ  4 å€**

éªŒè¯ âœ… ï¼š

```BASH
In [44]: import sys

In [45]: string1="hello"
In [46]: print(sys.getsizeof(string1) - sys.getsizeof(""))
5

In [47]: string2="å®‰"
In [48]: print(sys.getsizeof(string2) - sys.getsizeof(""))
27

In [49]: string3 = string1 + string2
In [50]: print(sys.getsizeof(string3) - sys.getsizeof(""))
37  # 5*2+27=37
```

```BASH
In [51]: import sys

In [52]: string1="hello"
In [53]: print(sys.getsizeof(string1) - sys.getsizeof(""))
5

In [54]: string2="ğŸ˜„"
In [55]: print(sys.getsizeof(string2) - sys.getsizeof(""))
31

In [56]: string3 = string1 + string2
In [57]: print(sys.getsizeof(string3) - sys.getsizeof(""))
51  # 5*4+31=51
```

> å¦‚æœåœ¨ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ä¸­åŠ å…¥äº†ä¸€ä¸ª emoji å­—ç¬¦ï¼Œå†…å­˜çš„æ¶ˆè€—å¯èƒ½ä¼šå¤§å¤§å¢åŠ 

### ä¸ºä»€ä¹ˆä¸ç”¨ UTF-8 è¡¨ç¤º

UTF-8 ä¸æ˜¯ä¸€ç§å®šé•¿çš„ç¼–ç æ–¹å¼ï¼Œä¼šæ ¹æ®æ¯ä¸ªå­—ç¬¦çš„å®é™…æ‰€éœ€å»åˆ†é…å­—èŠ‚æ•°ï¼Œè¿™æ ·ä¼šé€ æˆå­—ç¬¦ä¸²æ— æ³•æ ¹æ®ç´¢å¼•å¿«é€Ÿè®¿é—®ç›¸åº”å­—ç¬¦ã€‚è­¬å¦‚ `string="abcdğŸ˜„"`ï¼Œ
`string[0]`ã€`string[1]`ã€`string[2]`ã€`string[3]` éƒ½å¯ä»¥è®¿é—®åˆ°ç›¸åº”çš„å­—ç¬¦ï¼Œä½†æ˜¯ç”±äº ğŸ˜„ å ç”¨äº† 4 ä¸ªå­—èŠ‚ï¼Œå°±ä¸èƒ½é€šè¿‡ `string[4]` è®¿é—®åˆ°äº†ï¼Œ
è€Œä¸”ç”±äºæ˜¯å˜é•¿ï¼Œæ²¡åŠæ³•é¢„çŸ¥ç´¢å¼•çš„æ‰©å¤§è§„å¾‹

è€Œå¦‚æœæŒ‰ç…§ç°å®ä¸­å­—ç¬¦ä¸²çš„æ‰©å®¹è§„åˆ™ï¼Œ`string` å˜é‡çš„å‰ 4 ä¸ªå­—ç¬¦æ‰€å çš„å­—èŠ‚éƒ½ä¼šå¢åŠ  4 å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç´¢å¼•è®¿é—®çš„æ—¶å€™å¯ä»¥æœ‰è§„å¾‹çš„ *4 å»è®¿é—®ï¼Œä¹Ÿå°±å¯ä»¥å®ç°äº†ç´¢å¼•è®¿é—®çš„åŠŸèƒ½

### intern æœºåˆ¶

ç±»ä¼¼å°æ•´å‹å¯¹è±¡ï¼Œå¯¹äº ASCII å­—ç¬¦ä¸²ï¼Œå¦‚æœé•¿åº¦æ²¡æœ‰è¶…è¿‡20ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«æ”¾åˆ°ç¼“å­˜æ± ä¸­ï¼Œä»¥ä¾›åç»­çš„ä½¿ç”¨

> Java ä¸­çš„å­—ç¬¦ä¸²ç±»å‹ä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶

### å­—ç¬¦ä¸²çš„ + æ‹¼æ¥

ç”±äºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜æ¯”å¯¹è±¡ï¼Œå½“ä½¿ç”¨ `+` è¿›è¡Œæ‹¼æ¥æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¯¹åº”çš„åº•å±‚ C æ•°æ®ç»“æ„ä¹Ÿè¦è¿›è¡Œ `malloc`ã€`free`ã€å­—ç¬¦ä¸²æ‹·è´ç­‰æ“ä½œï¼Œ
å¦‚æœæ‹¼æ¥çš„æ¬¡æ•°å¾ˆå¤šçš„è¯ï¼Œå¯¹æ€§èƒ½ä¼šæœ‰ä¸€å®šçš„æ¶ˆè€—ã€‚å®˜æ–¹æ¨èçš„è§£å†³æ–¹æ³•æ˜¯ï¼Œå…ˆç”¨ `list` æˆ–è€… `tuple` å­˜å‚¨éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡ `join()` æ–¹æ³•è¿›è¡Œæ‹¼æ¥ï¼Œè¿™æ ·ä¼šå…ˆç»Ÿè®¡æ‰€éœ€çš„å­—èŠ‚æ•°ï¼Œ
ç„¶åç”³è¯·ä¸€æ¬¡å†…å­˜ï¼Œå†åšä¸€æ¬¡å­—ç¬¦ä¸²æ‹·è´

> Java è²Œä¼¼ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜

### å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•

åœ¨å¤„ç†å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼˜å…ˆåˆ° [è¿™é‡Œ](https://docs.python.org/3/library/stdtypes.html#string-methods) æ‰¾ï¼Œæ²¡æœ‰å†æ‰¾ç¬¬ä¸‰æ–¹æˆ–è€…è€ƒè™‘é€ è½®å­ 

## å­—èŠ‚æ•°ç»„ç±»å‹

### å­—èŠ‚æ•°ç»„ç±»å‹çš„å®šä¹‰

`bytes` æ˜¯æŒ‡å­˜å‚¨å•å…ƒæ˜¯å­—èŠ‚çš„æ•°ç»„ï¼Œåº•å±‚æ˜¯ C å®ç°ï¼Œæ˜¯ Python3.x æ–°å¢çš„ç±»å‹ï¼Œé™¤äº†å­˜å‚¨å•å…ƒä¸åŒä¹‹å¤–ï¼Œå’Œ `str` æ‰€æ”¯æŒçš„ [æ“ä½œ](https://docs.python.org/3/library/stdtypes.html#bytes-and-bytearray-operations)
åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„

### ç¼–ç å’Œè§£ç 

å­—ç¬¦é›†çš„ä½œç”¨ï¼šåœ°çƒä¸Šæœ‰å¾ˆå¤šè¯­è¨€ï¼Œè¿™äº›è¯­è¨€éœ€è¦ä¸­é—´æ˜ å°„è¡¨ï¼Œç”¨æ¥å°†ç°å®ä¸–ç•Œä¸­çš„è¯­è¨€æ˜ å°„æˆç›¸åº”çš„å­—èŠ‚ï¼Œè¿™ä¸ªæ˜ å°„è¡¨å°±æ˜¯å­—ç¬¦é›†ã€‚
ä¸€å¼€å§‹å„è‡ªä¸ºæˆ˜ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦é›†ï¼Œåæ¥ä¸ºäº†è§£å†³ä¸åŒè¯­è¨€ä¹‹é—´çš„ç¼–ç é—®é¢˜ï¼Œå‘å±•å‡ºç»Ÿä¸€çš„å­—ç¬¦é›†ï¼Œå¯ä»¥å›Šæ‹¬ä¸–ç•Œä¸Šç»å¤§éƒ¨åˆ†çš„è¯­è¨€ï¼Œ
æ¯”å¦‚ UTF-8 å°±æ˜¯å…¶ä¸­ä¸€ç§ï¼Œåœ¨ UTF-8 ä¸­ä¸€ä¸ªè‹±æ–‡å­—ç¬¦ç­‰äºä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡ç­‰äºä¸‰ä¸ªå­—èŠ‚ã€‚

`str`ã€`bytes`ã€äºŒè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š

![](https://raw.githubusercontent.com/hsxhr-10/Blog/master/image/python-1.png)

æ¡ˆä¾‹ï¼š

ä¸­æ–‡é‡Œé¢çš„ã€Œå®‰ã€å­—ï¼Œåˆ°è®¡ç®—æœºäºŒè¿›åˆ¶çš„è¿‡ç¨‹

```BASH
"å®‰".encode("utf8") --> b'\xe5\xae\x89'ï¼ˆä¹Ÿå°±æ˜¯ UTF-8 ç¼–ç çš„åå…­è¿›åˆ¶ E5AE89ï¼‰--> 111001011010111010001001ï¼ˆäºŒè¿›åˆ¶ï¼‰
```

## ç±»å‹è½¬æ¢

æ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„ç±»å‹è½¬æ¢å‡½æ•°ï¼š

- int(x)ï¼šå°† x è½¬æ¢æˆæ•´æ•°ç±»å‹
- float(x)ï¼šå°† x è½¬æ¢æˆæµ®ç‚¹æ•°ç±»å‹
- str(x)ï¼šå°† x è½¬æ¢ä¸ºå­—ç¬¦ä¸²
- repr(x)ï¼šå°† x è½¬æ¢ä¸ºè¡¨è¾¾å¼å­—ç¬¦ä¸²
- chr(x)ï¼šå°†æ•´æ•° x è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦
- ord(x)ï¼šå°†ä¸€ä¸ªå­—ç¬¦ x è½¬æ¢ä¸ºå®ƒå¯¹åº”çš„æ•´æ•°å€¼
- hex(x)ï¼šå°†ä¸€ä¸ªæ•´æ•° x è½¬æ¢ä¸ºä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²
- oct(x)ï¼šå°†ä¸€ä¸ªæ•´æ•° x è½¬æ¢ä¸ºä¸€ä¸ªå…«è¿›åˆ¶çš„å­—ç¬¦ä¸²

# Part2 å˜é‡

## æŸ¥æ‰¾é¡ºåº

å˜é‡çš„æŸ¥æ­¥éª¤å¦‚ä¸‹ï¼š

1. å±€éƒ¨å˜é‡ï¼ˆå‡½æ•°ä½“å†…ã€æ–¹æ³•ä½“å†…ã€ç±»å†…ï¼‰
2. é—­åŒ…å˜é‡
3. å…¨å±€å˜é‡
4. import è¿›æ¥çš„
5. å†…ç½®å˜é‡
6. æŠ¥é”™

## ä½œç”¨åŸŸ

ä¸åŒçš„å…³é”®å­—ã€è¯­å¥å¯èƒ½ä¼šæ”¹å˜å˜é‡çš„ä½œç”¨åŸŸ

### æ§åˆ¶æµç¨‹è¯­å¥

æ§åˆ¶æµç¨‹ç›¸å…³çš„è¯­å¥ï¼ˆifã€forã€while ç­‰ï¼‰ä¸ä¼šå°†å…¨å±€å˜é‡å˜æˆå±€éƒ¨å˜é‡ã€‚è­¬å¦‚ä¸‹é¢çš„å†™æ³•æ˜¯æ²¡é—®é¢˜çš„ï¼š

```BASH
In [174]: x = 1

In [175]: if True:
    ...:     print(x) # æ­¤æ—¶çš„ x æ˜¯ä¸Šé¢å…¨å±€å˜é‡
    ...:     x = 2
    ...:     print(x) # æ­¤æ—¶çš„ x æ˜¯å±€éƒ¨å˜é‡
    ...:
1
2
```

### å‡½æ•°ã€ç±»å£°æ˜è¯­å¥

å‡½æ•°ã€ç±»ç›¸å…³çš„å£°æ˜è¯­å¥ï¼ˆ`def`ã€`class`ã€`lambda` ç­‰ï¼‰å¯ä»¥ä¼šå°†å…¨å±€å˜é‡å˜æˆå±€éƒ¨å˜é‡

```BASH
In [104]: x = 1

In [105]: def foo():
     ...:     print(x)  # æ­¤æ—¶çš„ x è¿˜æ˜¯å…¨å±€å˜é‡
     ...:     x = 2     # å¯¹å…¨å±€å˜é‡é‡æ–°èµ‹å€¼ï¼Œx ä»å…¨å±€å˜é‡å˜æˆäº†å±€éƒ¨å˜é‡ï¼Œè¿™ä¼šå¯¼è‡´ä¸Šä¸€å¥ print(x) ä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡
     ...:

In [106]: foo()
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-106-c19b6d9633cf> in <module>
----> 1 foo()

<ipython-input-105-916a4a5ce689> in foo()
      1 def foo():
----> 2     print(x)
      3     x = 2
      4

UnboundLocalError: local variable 'x' referenced before assignment
```

è§£å†³æ–¹æ³•æ˜¯å½“ä½¿ç”¨å…¨å±€å˜é‡æ—¶ï¼Œç”¨ `global` æ˜¾å¼å£°æ˜ï¼š

```BASH
In [181]: x = 1

In [182]: def foo():
    ...:     global x
    ...:     print(x)
    ...:     x = 2
    ...:     print(x)
    ...:

In [183]: foo()
1
2
```

## å¯å˜æ€§

Python ä¸­çš„ä¸å¯å˜å¯¹è±¡æœ‰ï¼šæ•°å€¼ï¼ˆæ•´å‹ã€æµ®ç‚¹å‹ï¼‰ã€å­—ç¬¦ä¸²ã€å…ƒç¥–ã€frozenset

### å¯å˜å¯¹è±¡çš„é™·é˜±

å¯å˜å¯¹è±¡ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œå¹¶ä¸”æœ‰é»˜è®¤å€¼æ—¶ï¼Œé»˜è®¤å€¼çš„å–å€¼å°±æœ‰æ‰€è®²ç©¶ï¼š

```BASH
In [3]: def foo(l=[]):
   ...:     l.append(1)
   ...:     print(l)
   ...:

In [4]: foo()
[1]

In [5]: foo()
[1, 1]

In [6]: foo()
[1, 1, 1]

In [7]: foo()
[1, 1, 1, 1]
```

æ˜¾ç„¶è·Ÿé¢„æœŸç»“æœä¸ä¸€æ ·ï¼ŒåŸå› æ˜¯å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯å¯å˜å¯¹è±¡ï¼Œè€Œå¯å˜å¯¹è±¡ä½œä¸ºå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼å‡ºç°æ—¶ï¼Œåªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥åç»­çš„è°ƒç”¨
`l` å®é™…ä¸Šéƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯ä»¥é€šè¿‡ `foo.__defaults__` æ¥æŸ¥çœ‹æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œ`l` çš„å˜åŒ–

è§£å†³æ–¹æ³•æ˜¯å°†å¯å˜å¯¹è±¡çš„é»˜è®¤å€¼æ”¹æˆ `None`ï¼š

```BASH
n [10]: def foo(l=None):
    ...:      if l is None:
    ...:           l = []
    ...:      l.append(1)
    ...:      print(l)
    ...:

In [11]: foo()
[1]

In [12]: foo()
[1]

In [13]: foo()
[1]

In [14]: foo()
[1]
```

# Part3 è¿ç®—ç¬¦

## æ¯”è¾ƒè¿ç®—ç¬¦

- `is` å’Œ `==` çš„åŒºåˆ«ï¼šå‰è€…ç”¨äºæ¯”è¾ƒæ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåè€…ç”¨äºæ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰

## é€»è¾‘è¿ç®—ç¬¦

- é€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯è§„åˆ™
    ```BASH
    In [78]: name = "Github"

    In [79]: False and print(name)
    Out[79]: False
    
    In [80]: True and print(name)
    Github
    
    In [81]: False or print(name)
    Github
    
    In [82]: True or print(name)
    Out[82]: True
    ```
- é€»è¾‘è¿ç®—ç¬¦å¹¶ä¸æ˜¯åªèƒ½ä½œç”¨äºå¸ƒå°”è¡¨è¾¾å¼ï¼Œä¹Ÿä¸æ˜¯åªèƒ½è¿”å›å¸ƒå°”ç±»å‹
    ```BASH
    In [83]: 100 and 200
    Out[83]: 200
    
    In [84]: 45 and 0
    Out[84]: 0
    
    In [85]: "" or "http://c.biancheng.net/python/"
    Out[85]: 'http://c.biancheng.net/python/'
    
    In [86]: 18.5 or "http://c.biancheng.net/python/"
    Out[86]: 18.5
    ```

# Part4 æ§åˆ¶æµç¨‹

## æ¨å¯¼å¼

- åˆ—è¡¨æ¨å¯¼å¼ï¼š`l = [i for i in range(10) if i % 2 == 0]`
- å­—å…¸æ¨å¯¼å¼ï¼š`d = {i:i for i in range(10) if i % 2 == 0}`
- é›†åˆæ¨å¯¼å¼ï¼š`s = {i for i in range(10) if i % 2 == 0}`
- å…ƒç¥–æ¨å¯¼å¼ï¼š`t = tuple((i for i in range(10) if i % 2 == 0))`

æ¨å¯¼å¼é™¤äº†å¯ä»¥è®©ä»£ç é£æ ¼æ›´åŠ  Pythonic ä¹‹å¤–ï¼Œå¯¹æ€§èƒ½ä¹Ÿæœ‰æ¯”è¾ƒå¤§çš„å¥½å¤„ã€‚ä»¥åˆ—è¡¨æ¨å¯¼å¼ä¸ºä¾‹ï¼Œç”¨ Pycharm çš„ Profile å·¥å…·æ¥éªŒè¯ âœ… ï¼š

- for é£æ ¼

```python
if __name__ == "__main__":
    l = list()

    for i in range(9999999):
        l.append(i)
```

- æ¨å¯¼å¼é£æ ¼

```python
l = [i for i in range(9999999)]
```

å„è¿è¡Œ 10 æ¬¡ï¼Œå–å¹³å‡å€¼ï¼Œå‰è€…è€—æ—¶ 3000ms å·¦å³ï¼Œåè€…è€—æ—¶ 650ms å·¦å³ï¼Œç›¸å·® 4.5 å€å·¦å³

## zip()

`zip()` ä¸€èˆ¬ç”¨æ¥åŒæ—¶éå†å¤šä¸ªå®¹å™¨ï¼Œè­¬å¦‚ï¼š

```BASH
In [99]: for x in zip([1, 2, 3], [4, 5, 6]):
    ...:     print(x[0], x[1])
    ...:
1 4
2 5
3 6
```

# Part5 å‡½æ•°

## å‚æ•°ä¼ é€’

- å€¼ä¼ é€’ï¼šç”¨äºä¸å¯å˜å¯¹è±¡ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å…ƒç¥–ã€frozensetï¼‰ï¼Œä¿®æ”¹å½¢å‚ä¸ä¼šå½±å“åˆ°å®å‚
- å¼•ç”¨ä¼ é€’ï¼šç”¨äºå¯å˜å¯¹è±¡ï¼Œå®å‚ä¼šéšç€å½¢å‚æ”¹å˜

## å¯å˜å‚æ•°

ä½¿ç”¨åœºæ™¯ï¼šä¸€èˆ¬ç”¨äºå‡½æ•°çš„å‚æ•°ä¸ªæ•°ä¸ç¡®å®šæ—¶

- *argsï¼šä»£è¡¨è‹¥å¹²ä¸ªå€¼ï¼Œæˆ–è€…åºåˆ—çš„å±•å¼€ï¼ˆ*listã€*tupleã€*setï¼‰ï¼Œåœ¨å‡½æ•°ä½“å†…ä¼šè¢«è½¬æ¢æˆ `tuple`
- **kwargsï¼šä»£è¡¨è‹¥å¹²ä¸ªé”®å€¼å¯¹ï¼Œæˆ–è€…å­—å…¸çš„å±•å¼€ï¼ˆ**dictï¼‰ï¼Œåœ¨å‡½æ•°ä½“å†…ä¼šè¢«è½¬æ¢æˆ `dict`

## è£…é¥°å™¨

### è£…é¥°å™¨çš„æ‰§è¡Œé¡ºåº

æ¡ˆä¾‹ï¼š

```python
def wrapper_out1(func):
    print('--out11--')

    def inner1(*args, **kwargs):
        print("--in11--")
        ret = func(*args, **kwargs)
        print("--in12--")
        return ret
    print("--out12--")
    return inner1


def wrapper_out2(func):
    print('--out21--')

    def inner2(*args, **kwargs):
        print("--in21--")
        ret = func(*args, **kwargs)
        print("--in22--")
        return ret
    print("--out22--")
    return inner2


@wrapper_out2
@wrapper_out1
def test():
    print("--test--")
    return 1 * 2


if __name__ == '__main__':
    test()
```

åˆ†ææ­¥éª¤ï¼š

1. å°†è£…é¥°å™¨è¿˜åŸï¼Œå¾—åˆ°è¡¨è¾¾å¼ `f = wrapper_out2()(wrapper_out1()(test))`
2. æŒ‰ç…§ä»å†…åˆ°å¤–çš„é¡ºåºæ‰§è¡Œè£…é¥°å™¨å‡½æ•°ï¼Œå³å…ˆæ‰§è¡Œ `wrapper_out1()`ï¼Œå†æ‰§è¡Œ `wrapper_out2()`ã€‚æ­¤æ—¶è¾“å‡ºå¦‚ä¸‹ï¼š
  ```BASH
  --out11--
  --out12--
  --out21--
  --out22--
  ```
3. è¡¨è¾¾å¼å˜æˆ `f = inner2(inner1(test))`ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰§è¡Œï¼Œå³å…ˆæ‰§è¡Œ `inner2()`ï¼Œå†æ‰§è¡Œ `inner1()`ï¼Œæœ€åæ‰§è¡Œ `test()`ã€‚æ­¤æ—¶è¾“å‡ºå¦‚ä¸‹ï¼š
  ```BASH
  --in21--
  --in11--
  --test--
  --in12--
  --in22--
  ```

æœ€åå¯ä»¥å¾—åˆ°å®Œæ•´çš„è¾“å‡ºç»“æœä¸ºï¼š

```BASH
--out11--
--out12--
--out21--
--out22--
--in21--
--in11--
--test--
--in12--
--in22--
```

éªŒè¯ âœ… ï¼š

```BASH
In [128]: def wrapper_out1(func):
     ...:     print('--out11--')
     ...:
     ...:     def inner1(*args, **kwargs):
     ...:         print("--in11--")
     ...:         ret = func(*args, **kwargs)
     ...:         print("--in12--")
     ...:         return ret
     ...:     print("--out12--")
     ...:     return inner1
     ...:
     ...:
     ...: def wrapper_out2(func):
     ...:     print('--out21--')
     ...:
     ...:     def inner2(*args, **kwargs):
     ...:         print("--in21--")
     ...:         ret = func(*args, **kwargs)
     ...:         print("--in22--")
     ...:         return ret
     ...:     print("--out22--")
     ...:     return inner2
     ...:
     ...:
     ...: @wrapper_out2
     ...: @wrapper_out1
     ...: def test():
     ...:     print("--test--")
     ...:     return 1 * 2
     ...:
     ...:
     ...: if __name__ == '__main__':
     ...:     test()
     ...:
--out11--
--out12--
--out21--
--out22--
--in21--
--in11--
--test--
--in12--
--in22--
```

### ä½¿ç”¨æ¡ˆä¾‹

#### åŸºæœ¬ç”¨æ³•

```python
import functools


def wrapper(f):
    @functools.wraps(f)
    def inner(*args, **kwargs):
        return f(*args, **kwargs)
    return inner


@wrapper
def test(name):
    print('name: {}'.format(name))


if __name__ == '__main__':
    test('tiger')
```

#### å¸¦å‚è£…é¥°å™¨

```python
import functools


def decorator(age):
    def wrapper(f):
        @functools.wraps(f)
        def inner(*args, **kwargs):
            print('age: {}'.format(age))
            return f(*args, **kwargs)
        return inner
    return wrapper


@decorator(age=23)
def test(name):
    print('name: {}'.format(name))


if __name__ == '__main__':
    test('tiger')
```

#### è§£è€¦ä»£ç 

```python
import functools


def auth(f):
    @functools.wraps(f)
    def inner(*args, **kwargs):
        print('auth done.')
        return f(*args, **kwargs)
    return inner


def login(f):
    @functools.wraps(f)
    def inner(*args, **kwargs):
        print('login done.')
        return f(*args, **kwargs)
    return inner


@login
@auth
def test(name):
    print('I am {}'.format(name))


if __name__ == '__main__':
    test('tiger')
```

#### ç¼“å­˜

```python
import functools


def cache(f):
    @functools.wraps(f)
    def inner(*args, **kwargs):
        inner.total += 1
        print('total: {}'.format(inner.total))
        return f(*args, **kwargs)

    inner.total = 0
    return inner


@cache
def test(name):
    print('I am {}'.format(name))


if __name__ == '__main__':
    test('tiger')
    test('tiger')
    test('tiger')
```

#### å•ä¾‹æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰

```python
import functools


def single(cls):
    @functools.wraps(cls)
    def inner(*args, **kwargs):
        if inner.obj is None:
            inner.obj = cls(*args, **kwargs)
            print('create object instance {}.'.format(inner.obj))
        return inner.obj
    
    inner.obj = None
    return inner


@single
class Test(object):
    def __init__(self, name):
        super().__init__()
        self.name = name


if __name__ == '__main__':
    Test('tiger')
    Test('tiger')
    Test('tiger')
```

#### è®¡æ—¶å™¨

```PYTHON
import functools
import time


def timer(f):
    @functools.wraps(f)
    def inner(*args, **kwargs):
        start = time.time()
        r = f(*args, **kwargs)
        end = time.time()
        print("Function=%s, Time=%s" % (f.__name__, end - start))
        return r
    return inner
```

> `@functools.wraps(f)` æ˜¯ä¸ºäº†é˜²æ­¢è¢«è£…é¥°å‡½æ•°çš„ `__doc__`, `__name__` è¢«é”™è¯¯ä¿®æ”¹

## å‡½æ•°å¼ç¼–ç¨‹

- lambda è¡¨è¾¾å¼
- [map(func, iterator)](https://docs.python.org/3/library/functions.html#map)
- [filter(func, iterator)](https://docs.python.org/3/library/functions.html#filter)
- [functools.reduce(func, iterator)](https://docs.python.org/3/library/functools.html#functools.reduce)

> ä¸€èˆ¬æ­é… lambda ä½¿ç”¨

## ç”Ÿæˆå™¨

### ç”Ÿæˆå™¨çš„å®šä¹‰

å«æœ‰ `yield` è¯­å¥çš„å‡½æ•°ã€æ–¹æ³•å°±æ˜¯ç”Ÿæˆå™¨

### ç”Ÿæˆå™¨ç›¸å…³çš„æ“ä½œ

#### yield è¡¨è¾¾å¼

`yield` è¡¨è¾¾å¼å¯ä»¥ä¸­æ–­ç”Ÿæˆå™¨

#### `__next__()` æ–¹æ³• | next() å‡½æ•°

`__next__()` æ–¹æ³• æˆ–è€… next() å‡½æ•°å¯ä»¥å”¤é†’ä¸­æ–­çš„è¿­ä»£å™¨ã€‚å½“ç”Ÿæˆå™¨å·²ç»æ‰§è¡Œå®Œäº†ï¼Œä¼šæŠ›å‡º `StopIterator` å¼‚å¸¸

#### send() æ–¹æ³•

`send()` æ–¹æ³•å¯ä»¥å”¤é†’ä¸­æ–­çš„è¿­ä»£å™¨ï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªå€¼åˆ°ç”Ÿæˆå™¨å†…éƒ¨ï¼Œèµ‹å€¼åˆ° `yield` è¯­å¥å‰é¢çš„å˜é‡

æ¡ˆä¾‹ï¼š

```BASH
In [220]: def foo(n):
     ...:     for i in range(n):
     ...:         j = yield i
     ...:         if j == -1:
     ...:             break
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     g = foo(5)
     ...:     print(g.__next__())
     ...:     print(g.__next__())
     ...:     g.send(-1)          # ç»™ j èµ‹å€¼ -1, ç”Ÿæˆå™¨å†…çš„å¾ªç¯ç»ˆæ­¢
     ...:     print(g.__next__()) # å†æ¬¡è°ƒç”¨ __next__() æŠ›å‡º StopIteration å¼‚å¸¸
     ...:
0
1
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
<ipython-input-220-af4a7bdcff3b> in <module>
     10     print(g.__next__())
     11     print(g.__next__())
---> 12     g.send(-1)
     13     print(g.__next__())

StopIteration:
```

#### throw æ–¹æ³•

`throw()` æ–¹æ³•å¯ä»¥å”¤é†’ä¸­æ–­çš„è¿­ä»£å™¨ï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªå¼‚å¸¸åˆ°ç”Ÿæˆå™¨å†…éƒ¨

æ¡ˆä¾‹ï¼š

```BASH
In [225]: def foo(n):
     ...:     try:
     ...:         for i in range(n):
     ...:             j = yield i
     ...:             if j == -1:
     ...:                 break
     ...:     except ValueError:
     ...:         yield "ValueError"
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     g = foo(5)
     ...:     print(g.__next__())
     ...:     print(g.__next__())
     ...:     print(g.throw(ValueError))
     ...:
0
1
ValueError
```

#### close() æ–¹æ³•

`close()` æ–¹æ³•ç”¨äºä¸»åŠ¨å…³é—­ç”Ÿæˆå™¨

### ä½¿ç”¨åœºæ™¯

#### èŠ‚çœå†…å­˜

æ¡ˆä¾‹ï¼š

åœ¨ä¸ä½¿ç”¨ç”Ÿæˆå™¨çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å®æ‰“å®åœ°åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¯èƒ½ä¼šæ¶ˆè€—äº†ä¸å°‘å†…å­˜

```python
def gen(max):
    l = []
    for i in range(max):
        i += 1
        l.append(i)
    return l


if __name__ == "__main__":
    # å‡è®¾ max æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°é‡ï¼Œè­¬å¦‚ sys.maxsize
    max = 99999
    res = gen(max)
    for i in res:
        print(i)
```

ä½¿ç”¨ç”Ÿæˆå™¨ä¼˜åŒ–åä¸éœ€è¦ä¸€æ¬¡æ€§åœ°åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œåªéœ€è¦åœ¨æ¯æ¬¡ `yield` çš„æ—¶å€™ç”³è¯·å•ä¸ªå…ƒç´ çš„å†…å­˜ï¼Œçœäº†ä¸å°‘å†…å­˜

```python
def gen(max):
    for i in range(max):
        i += 1
        yield i


if __name__ == "__main__":
    # å‡è®¾ max æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°é‡ï¼Œè­¬å¦‚ sys.maxsize
    max = 99999
    g = gen(max)
    for i in g:
        print(i)
```

> ç°å®å¼€å‘ä¸­æ¯”è¾ƒå®¹æ˜“é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š
> 1. ä»æŸä¸ªåœ°æ–¹è·å–åˆ°å¤§é‡çš„æ•°æ®
> 2. æ ¹æ®æŸç§ä¸šåŠ¡é€»è¾‘åˆ›å»ºä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œæ–°åˆ—è¡¨çš„å¤§å°éœ€è¦è·Ÿ 1 ä¸­çš„æ•°æ®æ•°é‡ä¸€è‡´
> 3. åç»­éœ€è¦éå†æ–°åˆ—è¡¨ï¼ŒåšæŸäº›æ“ä½œ

#### åç¨‹

æ¡ˆä¾‹ï¼š

åç¨‹å½¢å¼çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹

```BASH
In [244]: def consumer():
     ...:     i = None
     ...:     while True:
     ...:         j = yield i
     ...:         print("---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†:", j)
     ...:
     ...:
     ...: def producer(c):
     ...:     for i in range(10):
     ...:         print("---> ç”Ÿäº§è€…ç”Ÿäº§äº†:", i)
     ...:         c.send(i)
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     c = consumer()
     ...:     c.__next__()    # None, æ­¤æ—¶çš„ consumer ä¸­æ–­åœ¨ j = yield i è¿™ä¸€å¥ä¸Š, ç­‰å¾…è¢« __next__() æˆ– send() æˆ– throw() å”¤é†’
     ...:     producer(c)
     ...:
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 0
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 0
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 1
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 1
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 2
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 2
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 3
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 3
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 4
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 4
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 5
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 5
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 6
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 6
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 7
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 7
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 8
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 8
---> ç”Ÿäº§è€…ç”Ÿäº§äº†: 9
---> æ¶ˆè´¹è€…æ¶ˆè´¹äº†: 9
```

# Part6 å¼‚å¸¸å¤„ç†

å¼‚å¸¸çš„å®šä¹‰ï¼šå¼‚å¸¸æ˜¯æŒ‡æ½œåœ¨çš„ï¼Œå‘ç”Ÿæ—¶é—´ä¸ç¡®å®šçš„ä¸€äº›åˆ—é”™è¯¯ï¼Œè­¬å¦‚ç£ç›˜ç©ºé—´ä¸è¶³ã€ç½‘ç»œä¸­æ–­ã€è¿è¡Œæ—¶é”™è¯¯ç­‰

å¼‚å¸¸ä¼šå¯¼è‡´ç¨‹åºä¸­æ–­é€€å‡ºï¼Œå¼‚å¸¸å¤„ç†æœºåˆ¶ç›¸å½“äºç»™äº†ä¸€ä¸ªæœºä¼šï¼Œè®©ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸åèƒ½å¤Ÿé‡æ–°å¤ºå›ç¨‹åºçš„æ§åˆ¶æƒã€‚å¯¹å¼‚å¸¸çš„å¤„ç†ç¨‹åº¦ä½“ç°äº†ç¨‹åºçš„å¥å£®æ€§

## æ ‡å‡†å¼‚å¸¸

- AttributeErrorï¼šè®¿é—®çš„å±æ€§ä¸å­˜åœ¨
- IOErrorï¼šI/O å¼‚å¸¸
- ImportErrorï¼šæ— æ³•å¼•å…¥æ¨¡å—æˆ–åŒ…ï¼Œå¤šæ˜¯è·¯å¾„é—®é¢˜ã€åç§°é”™è¯¯ã€å®‰è£…é—®é¢˜
- IndexErrorï¼šä¸‹æ ‡é”™è¯¯
- KeyErrorï¼šè®¿é—®çš„ key ä¸å­˜åœ¨
- KeyboardInterruptï¼šCtrl+C ä¿¡å·å¼•å‘
- NameErrorï¼šä½¿ç”¨æœªå®šä¹‰çš„å˜é‡
- SyntaxErrorï¼šè¯­æ³•é”™è¯¯
- TypeErrorï¼šç±»å‹ä¸åŒ¹é…
- UnboundLocalErrorï¼šè®¿é—®æœªèµ‹å€¼çš„å±€éƒ¨å˜é‡
- ValueErrorï¼šä¼ å…¥çš„å€¼ä¸ç¬¦åˆè¦æ±‚
- OSErrorï¼šç³»ç»Ÿé”™è¯¯
- RuntimeError: è¿è¡Œæ—¶é”™è¯¯

å®Œæ•´çš„å‚è€ƒ [è¿™é‡Œ](https://docs.python.org/3/tutorial/errors.html#errors-and-exceptions)

## å¼‚å¸¸å¤„ç†åŸåˆ™

- åœ¨å®Œæˆäº†å¸¸è§„çš„å¤„ç†é€»è¾‘åï¼Œè¿˜éœ€è¦è€ƒè™‘ç›¸å…³å¼‚å¸¸çš„å¤„ç†ï¼Œç‰¹åˆ«å½“ç¨‹åºæœ‰å„ç§ä¾èµ–æ—¶ï¼Œè­¬å¦‚å¯¹æœ¬åœ°ç³»ç»Ÿçš„èµ„æºä¾èµ–ï¼ˆç£ç›˜ï¼‰ã€
  å¯¹ç½‘ç»œç¯å¢ƒçš„ä¾èµ–ã€ç¬¬ä¸‰æ–¹ç³»ç»Ÿç»„ä»¶çš„ä¾èµ–ç­‰ç­‰
- ä¼˜å…ˆçº§è¶Šé«˜çš„å¼‚å¸¸å¤„ç†æ”¾è¶Šä¸Šé¢ï¼Œä¼˜å…ˆå¤„ç†
- ç²’åº¦è¶Šç»†ã€è¶Šå…·ä½“çš„å¼‚å¸¸ï¼Œè¶Šè¦æ”¾ä¸Šé¢ï¼Œé¿å…æ°¸è¿œéƒ½æ— æ³•æ•è·åˆ°

## è·å–å¼‚å¸¸ä¿¡æ¯

å¾ˆå¤šæ—¶å€™åœ¨æ•è·åˆ°å¼‚å¸¸ä¹‹åï¼Œéœ€è¦å°†è¯¦ç»†çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯é”™è¯¯å †æ ˆå‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚å…¶ä¸­ä¸€ç§æ–¹æ³•å¦‚ä¸‹ï¼š

```python
import traceback

try:
    1/0
except:
    print("---> æ•è·åˆ°çš„å¼‚å¸¸ä¿¡æ¯: {}".format(traceback.format_exc()))
```

# Part7 åŒ…å’Œæ¨¡å—

## ä½¿ç”¨è§„èŒƒ

- Python2.x çš„åŒ…å¿…é¡»æœ‰ `__init__.py` æ–‡ä»¶
- å¤šç”¨ `from ... import ...` è€Œä¸æ˜¯ `import m1.m2.m3`
- `from ... import ...` æ—¶å»ºè®®åˆ°æ¨¡å—ï¼Œè€Œä¸æ˜¯æ¨¡å—é‡Œé¢çš„ä¸œè¥¿
- å¦‚æœ Python æ–‡ä»¶éœ€è¦å•ç‹¬ä»¥è„šæœ¬å½¢å¼è¿è¡Œï¼ŒåŠ¡å¿…åŠ ä¸Š `if __name__ == "__main__"`ï¼Œå®ƒå¯ä»¥ç¡®ä¿ Python æ–‡ä»¶åœ¨å•ç‹¬è¿è¡Œæ—¶ `__name__` æ˜¯ `__main__`ï¼Œ
  ä»¥æ¨¡å—å½¢å¼å¯¼å…¥æ—¶ï¼Œ`__name__` æ˜¯æ¨¡å—æœ¬èº«çš„åå­—
- ç”¨ `__all__` æ§åˆ¶æ¨¡å—æš´éœ²çš„å±æ€§

## ImportError

æ¡ˆä¾‹ï¼š

å‡è®¾é¡¹ç›®çš„é¡¶çº§ç›®å½•æ˜¯ `/test_project`

```BASH
test_project
.
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â””â”€â”€ config.py
â”œâ”€â”€ main.py
â””â”€â”€ server
    â”œâ”€â”€ __init__.py
    â””â”€â”€ server.py
```

å„ä¸ªæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š

```python
# config.py
PROJECT_NAME = "test_project"


# server.py
from config.config import PROJECT_NAME

def server():
    print(PROJECT_NAME)
    print("---> I am server")


if __name__ == "__main__":
    server()


# main.py
from config.config import PROJECT_NAME
from server.server import server


def main():
    print(PROJECT_NAME)
    server()


if __name__ == "__main__":
    main()
```

æ‰§è¡Œ `python main.py` æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºå½“å‰ç›®å½•ä¸‹ç¡®å®æœ‰åŒ… config å’Œ serverã€‚ä½†æ˜¯å½“æ‰§è¡Œ `python server/server.py` æ—¶å°±æŠ¥é”™äº†ï¼š

```BASH
test_project â¤ python server/server.py
Traceback (most recent call last):
  File "server/server.py", line 1, in <module>
    from config.config import PROJECT_NAME
ImportError: No module named config.config
```

åŸå› æ˜¯ server ä¸‹æ²¡æœ‰ config åŒ…ï¼Œå¹¶ä¸”é¡¹ç›®çš„é¡¶çº§ç›®å½• `/test_project` ä¹Ÿä¸åœ¨ `sys.path` ä¸­ ã€‚å¯¹äº `ImportError: No module named ...` è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä»¥ä¸‹å¸¸ç”¨çš„è§£å†³æ–¹æ³•ï¼š

- åœ¨å¯¹åº”çš„ Python æ–‡ä»¶ä¸­æŠŠé¡¹ç›®çš„é¡¶çº§ç›®å½•åŠ ä¸Šï¼ˆä¸æ¨èï¼Œå› ä¸ºç›¸å…³çš„æ–‡ä»¶éƒ½è¦åŠ ï¼‰ï¼š
  ```python
  import sys
  sys.path.append("/Users/tiger/develop/tmp/test_project")
  
  from config.config import PROJECT_NAME
  
  def server():
      print(PROJECT_NAME)
      print("---> I am server")
  
  
  if __name__ == "__main__":
      server()
  ```
- ä»¥æ¨¡å—çš„æ–¹å¼æ‰§è¡Œ `python -m ...`ï¼ˆä¸€èˆ¬ï¼‰
- åœ¨ site-packages ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªä»¥ `.pth` ç»“å°¾çš„æ–‡ä»¶ï¼Œå°†é¡¹ç›®çš„é¡¶çº§ç›®å½•å†™è¿›å»ï¼ˆæ¨èï¼Œä¸€åŠ³æ°¸é€¸ï¼‰

# Part8 é¢å‘å¯¹è±¡

## ä¸€äº›åŒºåˆ«

é¢å‘å¯¹è±¡æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚å’Œ "æ ¹æ­£è‹—çº¢" çš„é¢å‘å¯¹è±¡è¯­è¨€ Java ç›¸æ¯”ï¼ŒPython ä¸­çš„é¢å‘å¯¹è±¡ä¼šè¡¨ç°å¾—æœ‰æ‰€ä¸åŒ

### å°è£…

Python ä¸­çš„å°è£…å¹¶ä¸èƒ½åœ¨è¯­è¨€å±‚é¢é™åˆ¶å¯¹ç§æœ‰å±æ€§çš„è®¿é—®ï¼ˆç®—æ˜¯æ˜¯ä¸ª "å‡çš„" å°è£…ï¼‰

Python ç”¨ `__` æ¥æ ‡è¯†ç§æœ‰çš„å±æ€§æˆ–è€…æ–¹æ³•ï¼š

```BASH
In [157]: class A:
     ...:     def __init__(self):
     ...:         self.__name = "A"
     ...:
     ...:     def __get_name(self):
     ...:         return self.__name
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     print(a.__name)
     ...:     print(a.__get_name())
     ...:
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-157-1255c0eeaaf2> in <module>
      9 if __name__ == "__main__":
     10     a = A()
---> 11     print(a.__name)
     12     print(a.__get_name())
     13

AttributeError: 'A' object has no attribute '__name'
```

ä¹ä¸€çœ‹å¥½åƒ Python åœ¨è¯­è¨€å±‚é¢ä¹Ÿæ”¯æŒå°è£…æ€§ï¼Œå®é™…ä¸Š Python åªæ˜¯å°† `__` æ ‡è¯†çš„å˜é‡åæ”¹æˆ `_ç±»å__å±æ€§å`ï¼ˆ çŸ¥é“çœŸç›¸çš„æˆ‘çœ¼æ³ªæµä¸‹æ¥ ğŸ˜‚ ï¼‰ï¼š

```BASH
In [162]: class A:
     ...:     def __init__(self):
     ...:         self.__name = "A"
     ...:
     ...:     def __get_name(self):
     ...:         return self.__name
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     print(dir(A))
     ...:     a = A()
     ...:     print(dir(a))
     ...:
['_A__get_name', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__']
['_A__get_name', '_A__name', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__']
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿˜æ˜¯å¯ä»¥é€šè¿‡çœŸå®çš„åå­—è®¿é—®ï¼š

```BASH
In [163]: class A:
     ...:     def __init__(self):
     ...:         self.__name = "A"
     ...:
     ...:     def __get_name(self):
     ...:         return self.__name
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     print(a._A__name)
     ...:     print(a._A__get_name())
     ...:
A
A
```

> å•ä¸‹åˆ’çº¿ `_` ç”¨æ¥æ ‡è¯†æ¨¡å—çš„ç§æœ‰æˆå‘˜
 
### ç»§æ‰¿

Python æ”¯æŒå¤šç»§æ‰¿ï¼ŒJava ä¸æ”¯æŒ

å¸¸ç”¨çš„ Mixin æ¨¡å¼å°±æ˜¯åŸºäºå¤šç»§æ‰¿çš„ç‰¹æ€§ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿ä¸åŒçš„ Mixin ç±»ï¼ŒæŒ‰éœ€åŠ¨æ€ç»„åˆéœ€è¦çš„åŠŸèƒ½ï¼š

```BASH
In [165]: class DictMixin:
     ...:     def __getitem__(self, key):
     ...:         return self.__dict__[key]
     ...:
     ...:     def __setitem__(self, key, value):
     ...:         self.__dict__[key] = value
     ...:
     ...:
     ...: class RunnertMixin:
     ...:     def run(self):
     ...:         print("---> I can run")
     ...:
     ...:
     ...: class People(DictMixin, RunnertMixin):
     ...:     def __init__(self, name, age, sex):
     ...:         self.name = name
     ...:         self.age = age
     ...:         self.sex = sex
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     p = People("yoko", 23, "female")
     ...:     print(p["name"], p["age"], p["sex"])
     ...:     p.run()
     ...:
yoko 23 female
---> I can run
```

People å¯èƒ½é™¤äº†è·‘æ­¥è¿˜ä¼šæ¸¸æ³³ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡æ–°å¢ Mixin ç±»æ¥ç»§æ‰¿å®ç°ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸä»£ç çš„åŸºç¡€ä¸Šæ‰©å±•ä¸šåŠ¡é€»è¾‘äº†

### å¤šæ€

Python å¯ä»¥åšå‡ºå¤šæ€çš„æ•ˆæœï¼Œä½†æ˜¯ç”±äº Python æ˜¯åŠ¨æ€è¯­è¨€ï¼Œæœ¬èº«æ²¡æœ‰é™æ€ç±»å‹é™åˆ¶å’Œä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ï¼Œä¸å­˜åœ¨å‘ä¸Šè½¬å‹ã€å‘ä¸‹è½¬å‹è¿™äº›æ¦‚å¿µï¼Œ
ç†è®ºä¸Šå®ƒçš„å˜é‡å¯ä»¥æ¥å—äººæ„ç±»å‹çš„å¯¹è±¡ï¼ˆç®—æ˜¯ä¸ª "å‡çš„" å¤šæ€ï¼‰ã€‚ä¸è¿‡è¯åˆè¯´å›æ¥ï¼ŒPython æœ¬èº«æå€¡ä¹Ÿä¸æ˜¯é™æ€è¯­è¨€çš„é‚£å¥—å¤šæ€åšæ³•ï¼Œè€Œæ˜¯
ã€Œé¸­å­ç±»å‹ã€çš„å¤šæ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦ç»§æ‰¿ï¼Œåªéœ€è¦ä¿è¯æ‹¥æœ‰çš„æ–¹æ³•ä¸€æ ·å°±å¯ä»¥äº†

## ç±»å’Œå¯¹è±¡

### `__init__()` å’Œ `__new__()` çš„åŒºåˆ«

- `__init__()` ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡
- `__new__()` ç”¨æ¥åˆ›å»ºå¯¹è±¡ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ç”¨æ¥å®ç°çº¿ç¨‹å®‰å…¨çš„ [å•ä¾‹æ¨¡å¼](https://github.com/hsxhr-10/Blog/blob/master/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.md#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%89%88%E6%9C%AC)

### @property

`@property` ç”¨æ¥å†™ç±»ä¼¼ Java çš„ getter/setter æ–¹æ³•ã€‚ç›¸æ¯”æè¿°ç¬¦å¯¹æ‰€æœ‰å±æ€§çš„ä¸€åˆ€åˆ‡æ•ˆæœï¼Œ`@property` å¯ä»¥é€‰æ‹©ä½œç”¨äºå“ªäº›å±æ€§

æ¡ˆä¾‹ï¼š

```BASH
In [167]: class People:
     ...:     def __init__(self, name, age, sex):
     ...:         self.__name = name
     ...:         self.__age = age
     ...:         self.__sex = sex
     ...:
     ...:     @property
     ...:     def name(self):
     ...:         return self.__name
     ...:
     ...:     @property
     ...:     def age(self):
     ...:         return self.__age
     ...:
     ...:     @property
     ...:     def sex(self):
     ...:         return self.__sex
     ...:
     ...:     @name.setter
     ...:     def name(self, name):
     ...:         self.__name = name
     ...:
     ...:     @age.setter
     ...:     def age(self, age):
     ...:         if age < 0 or age > 250:
     ...:             return
     ...:         self.__age = age
     ...:
     ...:     @sex.setter
     ...:     def sex(self, sex):
     ...:         if sex not in ("male", "female", "transsexual"):
     ...:             return
     ...:         self.__sex = sex
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     p = People("yoko", 23, "female")
     ...:     print(p.name, p.age, p.sex)
     ...:
     ...:     p.name = "yoko1"
     ...:     p.age = 24
     ...:     p.sex = "male"
     ...:     print(p.name, p.age, p.sex)
     ...:
yoko 23 female
yoko1 24 male
```

### super()

- `super()` ä¸€èˆ¬ç”¨äºè°ƒç”¨åŸºç±»çš„æ–¹æ³•
- åœ¨ç»§æ‰¿æ ‘ä¸­ï¼Œè¦ä¹ˆå…¨ç”¨ `super().__init__(*args, **kwargs)`ï¼Œè¦ä¹ˆå…¨ä¸ç”¨ï¼Œä¸è¦æ··ç€ `BASE.__init__(*args, **kwargs)` è¿™ç§å†™æ³•ç”¨
- å­˜åœ¨å¤šç»§æ‰¿æ—¶ï¼Œ`super().xxx` å¯¹åº”çš„æ˜¯ç¬¬ä¸€ä¸ªç»§æ‰¿çš„åŸºç±»

### ä¿®æ”¹ç±»å±æ€§çš„é™·é˜±

å¯¹ç±»å±æ€§çš„ä¿®æ”¹å¿…é¡»é€šè¿‡ç±»æœ¬èº«è¿›è¡Œï¼Œå¦‚æœé€šè¿‡å¯¹è±¡ä¿®æ”¹ï¼ŒPython è¿è¡Œæ—¶åªä¼šç»™å¯¹è±¡æ–°å¢ä¸€ä¸ªå±æ€§

æ¡ˆä¾‹ï¼š

```BASH
In [173]: class A:
     ...:     flag = 1
     ...:
     ...:
     ...: class B(A):
     ...:     pass
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     b = B()
     ...:     print("---> ä¿®æ”¹å‰ A.flag:", A.flag)
     ...:     print("---> ä¿®æ”¹å‰ B.flag:", B.flag)
     ...:     print("---> ä¿®æ”¹å‰ a.flag:", a.flag)
     ...:     print("---> ä¿®æ”¹å‰ b.flag:", b.flag)
     ...:
     ...:     a.flag = 2
     ...:     print("---> ä¿®æ”¹å A.flag:", A.flag)
     ...:     print("---> ä¿®æ”¹å B.flag:", B.flag)
     ...:     print("---> ä¿®æ”¹å a.flag:", a.flag)
     ...:     print("---> ä¿®æ”¹å b.flag:", b.flag)
     ...:
---> ä¿®æ”¹å‰ A.flag: 1
---> ä¿®æ”¹å‰ B.flag: 1
---> ä¿®æ”¹å‰ a.flag: 1
---> ä¿®æ”¹å‰ b.flag: 1
---> ä¿®æ”¹å A.flag: 1
---> ä¿®æ”¹å B.flag: 1
---> ä¿®æ”¹å a.flag: 2
---> ä¿®æ”¹å b.flag: 1
```

å…¶ä¸­ä¸€ç§ä¿®å¤æ–¹æ³•æ˜¯é€šè¿‡ç±»æœ¬èº«å»ä¿®æ”¹ï¼š

```BASH
In [174]: class A:
     ...:     flag = 1
     ...:
     ...:
     ...: class B(A):
     ...:     pass
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     b = B()
     ...:     print("---> ä¿®æ”¹å‰ A.flag:", A.flag)
     ...:     print("---> ä¿®æ”¹å‰ B.flag:", B.flag)
     ...:     print("---> ä¿®æ”¹å‰ a.flag:", a.flag)
     ...:     print("---> ä¿®æ”¹å‰ b.flag:", b.flag)
     ...:
     ...:     A.flag = 2
     ...:     print("---> ä¿®æ”¹å A.flag:", A.flag)
     ...:     print("---> ä¿®æ”¹å B.flag:", B.flag)
     ...:     print("---> ä¿®æ”¹å a.flag:", a.flag)
     ...:     print("---> ä¿®æ”¹å b.flag:", b.flag)
     ...:
---> ä¿®æ”¹å‰ A.flag: 1
---> ä¿®æ”¹å‰ B.flag: 1
---> ä¿®æ”¹å‰ a.flag: 1
---> ä¿®æ”¹å‰ b.flag: 1
---> ä¿®æ”¹å A.flag: 2
---> ä¿®æ”¹å B.flag: 2
---> ä¿®æ”¹å a.flag: 2
---> ä¿®æ”¹å b.flag: 2
```

### ç±»æ–¹æ³•

å¯¹è±¡å¯ä»¥ä½¿ç”¨ç±»å±æ€§ï¼Œä½†æ˜¯åè¿‡æ¥ç±»ä¸èƒ½ä½¿ç”¨å¯¹è±¡çš„å±æ€§

æ¡ˆä¾‹ï¼š

```BASH
In [181]: class A:
     ...:     flag = 1
     ...:
     ...:     def __init__(self):
     ...:         self.name = "xxx"
     ...:
     ...:
     ...:     @classmethod
     ...:     def show(cls):
     ...:         print(cls.flag)
     ...:         print(cls.name)
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     a.show()
     ...:
1
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-181-85a8b09c1f8b> in <module>
     14 if __name__ == "__main__":
     15     a = A()
---> 16     a.show()

<ipython-input-181-85a8b09c1f8b> in show(cls)
      9     def show(cls):
     10         print(cls.flag)
---> 11         print(cls.name)
     12
     13

AttributeError: type object 'A' has no attribute 'name'
```

## é­”æœ¯æ–¹æ³•

Python æå€¡çš„æ˜¯ã€Œé¸­å­ç±»å‹ã€ï¼Œå³ç±»ä¸éœ€è¦æ˜¾å¼å£°æ˜è‡ªå·±æ˜¯åªé¸­ï¼Œåªè¦èƒ½è¡¨ç°å¾—åƒåªé¸­ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºä»–æ˜¯åªé¸­ ğŸ˜‚ ã€‚é­”æœ¯æ–¹æ³•ï¼ˆå±æ€§ï¼‰æ­£æ˜¯è¿™ç§æ€æƒ³çš„ä½“ç°å’Œå·¥å…·ï¼Œ
é€šè¿‡ä¸ºç±»æ·»åŠ é­”æœ¯æ–¹æ³•ï¼Œè®©ç±»å¯ä»¥è¡¨ç°å‡ºå…¶ä»–ç±»å‹çš„ç‰¹å¾

### æ§åˆ¶å±æ€§è®¿é—®

#### è·å–å±æ€§

è·å–å±æ€§å¯ä»¥é€šè¿‡ `obj.attr` æˆ–è€… `getattr(obj, "attr")`ï¼Œä¸¤è€…æ•ˆæœä¸€è‡´ã€‚å½“å±æ€§ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œé»˜è®¤æŠ›å‡º AttributeError å¼‚å¸¸ï¼Œä½†æ˜¯å¦‚æœå®ç°äº†
`__getattr__()` æ–¹æ³•ï¼Œæœ€ç»ˆè°ƒç”¨çš„æ˜¯è¯¥æ–¹æ³•ï¼Œè€Œä¸”è¿”å›è¯¥æ–¹æ³•çš„å€¼æˆ–è€… `None`

æ¡ˆä¾‹ï¼š

- æ²¡æœ‰å®šä¹‰ `__getattr__()`

```BASH
In [196]: class A:
     ...:     def __init__(self):
     ...:         self.name = "class A"
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     print(getattr(a, "name"))
     ...:     print(getattr(a, "age"))
     ...:
class A
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-196-87a6dea80e1d> in <module>
      7     a = A()
      8     print(getattr(a, "name"))
----> 9     print(getattr(a, "age"))
     10

AttributeError: 'A' object has no attribute 'age'
```

- å®šä¹‰äº† `__getattr__()`

```BASH
In [197]: class B:
     ...:     def __init__(self):
     ...:         self.name = "class B"
     ...:
     ...:     def __getattr__(self, item):
     ...:         return 23 if item == "age" else "unknown"
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     b = B()
     ...:     print(getattr(b, "name"))
     ...:     print(getattr(b, "age"))
     ...:     print(getattr(b, "sex"))
     ...:
class B
23
unknown
```

- åœ¨ `__getattr__()` ä¸­è°ƒç”¨ `getattr()`ï¼Œé€ æˆé€’å½’çˆ†æ ˆ

```BASH
In [198]: class B:
     ...:     def __init__(self):
     ...:         self.name = "class B"
     ...:
     ...:     def __getattr__(self, item):
     ...:         return getattr(self, item)
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     b = B()
     ...:     print(getattr(b, "name"))
     ...:     print(getattr(b, "age"))
     ...:     print(getattr(b, "sex"))
     ...:
class B
---------------------------------------------------------------------------
RecursionError                            Traceback (most recent call last)
<ipython-input-198-d176bb5a25d5> in <module>
     10     b = B()
     11     print(getattr(b, "name"))
---> 12     print(getattr(b, "age"))
     13     print(getattr(b, "sex"))
     14

<ipython-input-198-d176bb5a25d5> in __getattr__(self, item)
      4
      5     def __getattr__(self, item):
----> 6         return getattr(self, item)
      7
      8

... last 1 frames repeated, from the frame below ...

<ipython-input-198-d176bb5a25d5> in __getattr__(self, item)
      4
      5     def __getattr__(self, item):
----> 6         return getattr(self, item)
      7
      8

RecursionError: maximum recursion depth exceeded
```

#### æ·»åŠ å±æ€§ | ä¿®æ”¹å±æ€§å€¼

Python ä½œä¸ºä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ å±æ€§æ˜¯å¾ˆåˆç†çš„ ğŸ¶ ï¼Œã€ŒçŒ´å­è¡¥ä¸ã€ä¹Ÿæ˜¯åŸºäºè¿™ä¸ªåŸç†

åŠ¨æ€æ·»åŠ å±æ€§å¯ä»¥é€šè¿‡ `obj.attr = value` æˆ–è€… `setattr(obj, "attr", value)`ï¼Œä¸¤è€…æ•ˆæœä¸€è‡´ã€‚å¦‚æœå®šä¹‰äº† `__setattr__()` æ–¹æ³•ï¼Œåˆ™æœ€ç»ˆè°ƒç”¨çš„æ˜¯è¯¥æ–¹æ³•ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¯¥æ–¹æ³•å†…éƒ¨å¦‚æœé€šè¿‡ `obj.attr = value` èµ‹å€¼ï¼Œä¼šé€’å½’çˆ†æ ˆï¼Œæ­£ç¡®åšæ³•æ˜¯é€šè¿‡ `__dict__` é­”æœ¯å±æ€§æ¥èµ‹å€¼

æ¡ˆä¾‹ï¼š

- é€’å½’çˆ†æ ˆ

```BASH
In [203]: class A:
     ...:     def __init__(self):
     ...:         self.name = "class A"
     ...:
     ...:     def __setattr__(self, key, value):
     ...:         self.key = value
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     a.age = 23
     ...:     print(a.age)
     ...:
---------------------------------------------------------------------------
RecursionError                            Traceback (most recent call last)
<ipython-input-203-4144abbff683> in <module>
      8
      9 if __name__ == "__main__":
---> 10     a = A()
     11     a.age = 23
     12     print(a.age)

<ipython-input-203-4144abbff683> in __init__(self)
      1 class A:
      2     def __init__(self):
----> 3         self.name = "class A"
      4
      5     def __setattr__(self, key, value):

<ipython-input-203-4144abbff683> in __setattr__(self, key, value)
      4
      5     def __setattr__(self, key, value):
----> 6         self.key = value
      7
      8

... last 1 frames repeated, from the frame below ...

<ipython-input-203-4144abbff683> in __setattr__(self, key, value)
      4
      5     def __setattr__(self, key, value):
----> 6         self.key = value
      7
      8

RecursionError: maximum recursion depth exceeded
```

- é€šè¿‡ `__dict__`

```BASH
In [204]: class A:
     ...:     def __init__(self):
     ...:         self.name = "class A"
     ...:
     ...:     def __setattr__(self, key, value):
     ...:         self.__dict__[key] = value
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     a.age = 23
     ...:     print(a.age)
     ...:
23
```

#### åˆ é™¤å±æ€§

è·å–å±æ€§å¯ä»¥é€šè¿‡ `del obj.attr` æˆ–è€… `delattr(obj, "attr")`ï¼Œä¸¤è€…æ•ˆæœä¸€è‡´ã€‚å¦‚æœå®šä¹‰äº† `__delattr__()` æ–¹æ³•ï¼Œåˆ™æœ€ç»ˆè°ƒç”¨çš„æ˜¯è¯¥æ–¹æ³•

æ¡ˆä¾‹ï¼š

- é€’å½’çˆ†æ ˆ

```BASH
In [205]: class A:
     ...:     def __init__(self):
     ...:         self.name = "class A"
     ...:
     ...:     def __delattr__(self, item):
     ...:         del self.item
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     delattr(a, "name")
     ...:
---------------------------------------------------------------------------
RecursionError                            Traceback (most recent call last)
<ipython-input-205-7250707826c1> in <module>
      9 if __name__ == "__main__":
     10     a = A()
---> 11     delattr(a, "name")

<ipython-input-205-7250707826c1> in __delattr__(self, item)
      4
      5     def __delattr__(self, item):
----> 6         del self.item
      7
      8

... last 1 frames repeated, from the frame below ...

<ipython-input-205-7250707826c1> in __delattr__(self, item)
      4
      5     def __delattr__(self, item):
----> 6         del self.item
      7
      8

RecursionError: maximum recursion depth exceeded
```

- é€šè¿‡ `__dict__`

```BASH
In [206]: class A:
     ...:     def __init__(self):
     ...:         self.name = "class A"
     ...:
     ...:     def __delattr__(self, item):
     ...:         del self.__dict__[item]
     ...:
     ...:
     ...: if __name__ == "__main__":
     ...:     a = A()
     ...:     print(hasattr(a, "name"))
     ...:     delattr(a, "name")
     ...:     print(hasattr(a, "name"))
     ...:
True
False
```

### å…¶ä»–

é™¤äº†å±æ€§è®¿é—®ç›¸å…³çš„é­”æœ¯æ–¹æ³•ä¹‹å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰ï¼š

- åˆ›å»ºã€åˆå§‹åŒ–ç›¸å…³çš„ï¼š`__new__()`ï¼Œ`__init__()`
- å†…å­˜å›æ”¶ç›¸å…³çš„ï¼š`__del__()`ï¼ˆå¦‚æœä¸¤ä¸ªå¯¹è±¡å¾ªç¯å¼•ç”¨ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªè‡ªå®šä¹‰äº†è¯¥æ–¹æ³•ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼‰
- å­—ç¬¦ä¸²ç›¸å…³çš„ï¼š[å¤ªå¤šäº†](https://docs.python.org/3/reference/datamodel.html#object.__repr__)
- æ¯”è¾ƒè¿ç®—ç¬¦ç›¸å…³çš„ï¼š[å¤ªå¤šäº†](https://docs.python.org/3/reference/datamodel.html#object.__lt__)
- ç”¨æ¥èŠ‚çœå†…å­˜ç›¸å…³çš„ï¼š`__slots__()`
- å­ç±»æ£€æµ‹ç›¸å…³çš„ï¼š[è¿™é‡Œ](https://docs.python.org/3/reference/datamodel.html#customizing-instance-and-subclass-checks)
- å¯è°ƒç”¨å¯¹è±¡ï¼š`__call__()`
- å®¹å™¨ç›¸å…³çš„ï¼š[å¤ªå¤šäº†](https://docs.python.org/3/reference/datamodel.html#emulating-container-types)
- æ•°å€¼è¿ç®—ç¬¦ç›¸å…³çš„ï¼š[å¤ªå¤šäº†](https://docs.python.org/3/reference/datamodel.html#emulating-numeric-types)
- ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼š[è¿™é‡Œ](https://docs.python.org/3/reference/datamodel.html#with-statement-context-managers)
