# ç¼–ç è§„èŒƒ

ç¼–ç è§„èŒƒçš„é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œä¸æ•¢æƒ³è±¡ä¸€ä¸ªå¤šäººå‚ä¸çš„é¡¹ç›®å¦‚æœæ²¡æœ‰ç¼–ç è§„èŒƒä¼šå˜æˆæ€ä¹ˆæ ·ã€‚Python ä¸­æœ‰ä¸å°‘ç¼–ç è§„èŒƒï¼Œè¿™é‡Œä»¥å®˜æ–¹çš„ PEP8 ä¸ºå‡†

## å°½ä¿¡ä¹¦ä¸å¦‚æ— ä¹¦

ä¸€å‘³åœ°æŒ‰ç…§è§„èŒƒå¯èƒ½å¹¶ä¸ä¸€å®šå¯¹ï¼Œæœ‰äº›æ—¶å€™ï¼Œé€‚å½“ã€Œè¿åä¸€ä¸‹ã€è§„èŒƒï¼Œå¯èƒ½ä¼šå¢åŠ ä»£ç çš„å¯è¯»æ€§ï¼Œè­¬å¦‚ä¸‹é¢çš„æ¡ˆä¾‹ï¼š

- ä¸¥æ ¼æŒ‰ç…§ PEP8

```BASH
asd = 11212121
bbsad = 21212121212121212
cccdsfsdfdsfsdfsd = 312121
dddsadfasd = 41212121
eee = 52121212
ffdsfdsfsdfff = 621121212121212
gggggfdsfdsfdsfsdfsdfdsfsdfdsfg = 7212121
```

- é€‚å½“ã€Œè¿åã€PEP8

```BASH
asd                             = 11212121
bbsad                           = 21212121212121212
cccdsfsdfdsfsdfsd               = 312121
dddsadfasd                      = 41212121
eee                             = 52121212
ffdsfdsfsdfff                   = 621121212121212
gggggfdsfdsfdsfsdfsdfdsfsdfdsfg = 7212121
```

ä¸ºäº†ä½“ç°æ•ˆæœï¼Œæ•…æ„æŠŠå‘½åå¼„ä¹±ç‚¹ï¼Œæ˜¾ç„¶ï¼Œã€Œè¿åã€äº†è§„èŒƒçš„ä»£ç å¯è¯»æ€§åè€Œæ›´å¥½ã€‚è¿™é‡Œå°±è¦æåˆ° IDE çš„è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–åŠŸèƒ½äº†ï¼Œå¯èƒ½åˆšå¼€å§‹ç”¨æ˜¯æŒºçˆ½çš„ï¼Œ
ä½†æ˜¯å®ƒæ˜¯ä¸¥æ ¼æŒ‰ç…§æŸä¸€ç§ç¼–ç è§„èŒƒå»æ ¼å¼åŒ–çš„ï¼Œè¿™å°±ä¸èƒ½åƒä¸Šé¢é‚£æ ·åè§„èŒƒï¼Œè€Œä¸”è¿˜å¾ˆå¯èƒ½ä¼šæŠŠä¸ç”¨æ’ä»¶çš„äººå¾—ä»£ç ç»™ä¸€å—æ ¼å¼åŒ–äº†ã€‚æ‰€ä»¥ç”¨è¿™äº›æ’ä»¶è¿˜æ˜¯è¦çœ‹å›¢é˜Ÿçš„æƒ…å†µï¼Œ
å¾ˆå¤šå¼€æºé¡¹ç›®æ˜¯ä¸å…è®¸ä½¿ç”¨è¿™äº›æ’ä»¶çš„ï¼Œä¸ªäººä¹Ÿä¸æ¨èä½¿ç”¨

è¿™é‡Œè¦åæ§½ä¸€ä¸‹ï¼Œåœ¨ PEP8 é‡Œé¢å¾ˆå¤šæ—¶å€™åŒä¸€ä¸ªåœºæ™¯æœ‰å¥½å‡ ç§è§„èŒƒ ğŸ˜‚ ï¼Œæœ‰ç‚¹å¤ªå¤šäº†ï¼Œæ„Ÿè§‰æœ‰ä¸¤ä¸ªé€‰æ‹©å°±å·®ä¸å¤šäº†ï¼Œå¤šäº†åè€Œå®¹æ˜“é€ æˆæ··ä¹±ã€‚
æ‰€ä»¥ä¸‹é¢ä¼šåœ¨ä¸ªäººæ„Ÿè§‰çœ‹èµ·æ¥æœ€èˆ’æœçš„æ ‡æ³¨ä¸Šã€Œé¦–é€‰ã€

ä¸‹é¢ç»¼åˆ PEP8ã€åœ¨ä¸åŒå›¢é˜Ÿè§è¿‡çš„è§„èŒƒã€å¹³æ—¶çš„ä¹ æƒ¯ï¼Œè®°å½•ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å’Œé‡è¦çš„è§„èŒƒï¼Œå–å…¶ç²¾åå»å…¶ç³Ÿç²•ã€‚ä¹Ÿé¡ºå¸¦è®°å½•ä¸€ä¸‹ pylint è¿™ä¸ªå·¥å…·

## ä»£ç å¸ƒå±€

### ç¼©è¿›

#### (1) å‡½æ•°å®šä¹‰å’Œè°ƒç”¨

- æ¨è

```BASH
# ä¸å·¦æ‹¬å·å¯¹é½ï¼ˆé¦–é€‰ï¼‰
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

# æŒ‚è¡Œç¼©è¿›åº”è¯¥å†æ¢ä¸€è¡Œ
foo = long_function_name(
    var_one, var_two,
    var_three, var_four)

# ç”¨æ›´å¤šçš„ç¼©è¿›æ¥ä¸å…¶ä»–è¡ŒåŒºåˆ†
def long_function_name(
        var_one, var_two, var_three,
        var_four):
    print(var_one)
```

- ä¸æ¨è

```BASH
# æ²¡æœ‰ä½¿ç”¨å‚ç›´å¯¹é½æ—¶ï¼Œç¦æ­¢æŠŠå‚æ•°æ”¾åœ¨ç¬¬ä¸€è¡Œ
foo = long_function_name(var_one, var_two,
    var_three, var_four)

# å½“ç¼©è¿›æ²¡æœ‰ä¸å…¶ä»–è¡ŒåŒºåˆ†æ—¶ï¼Œè¦å¢åŠ ç¼©è¿›
def long_function_name(
    var_one, var_two, var_three,
    var_four):
    print(var_one)
```

#### (2) if è¯­å¥

- æ¨è

```BASH
# æ²¡æœ‰é¢å¤–çš„ç¼©è¿›ï¼ˆé¦–é€‰ï¼‰
if (this_is_one_thing and
    that_is_another_thing):
    do_something()

# å¢åŠ ä¸€ä¸ªæ³¨é‡Šï¼Œåœ¨èƒ½æä¾›è¯­æ³•é«˜äº®çš„ç¼–è¾‘å™¨ä¸­å¯ä»¥æœ‰ä¸€äº›åŒºåˆ†
if (this_is_one_thing and
    that_is_another_thing):
    # Since both conditions are true, we can frobnicate.
    do_something()

# åœ¨æ¡ä»¶åˆ¤æ–­çš„è¯­å¥æ·»åŠ é¢å¤–çš„ç¼©è¿›
if (this_is_one_thing
        and that_is_another_thing):
    do_something()
```

#### (3) å®¹å™¨å­—é¢å€¼

- æ¨è

```BASH
#ï¼ˆé¦–é€‰ï¼‰
my_list = [
    1, 2, 3,
    4, 5, 6,
]
result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
)
  
my_list = [
    1, 2, 3,
    4, 5, 6,
    ]
result = some_function_that_takes_arguments(
    'a', 'b', 'c',
    'd', 'e', 'f',
    )
```

### æœ€å¤§è¡Œé•¿åº¦

è§„èŒƒæ˜¯ 79 ä¸ªå­—ç¬¦ï¼Œä¸ªäººæ„Ÿè§‰å¯ä»¥é€‚å½“å¢åŠ ï¼Œè­¬å¦‚ 120 ä¸ª

### è¿ç®—ç¬¦å’Œæ¢è¡Œ

- æ¨è

```BASH
income = (gross_wages
          + taxable_interest
          + (dividends - qualified_dividends)
          - ira_deduction
          - student_loan_interest)
```

- ä¸æ¨è

```BASH
income = (gross_wages +
          taxable_interest +
          (dividends - qualified_dividends) -
          ira_deduction -
          student_loan_interest)
```

### ç©ºè¡Œ

- å‡½æ•°ã€ç±»è¿™äº›ç»„ä»¶çš„å®šä¹‰ï¼Œç”¨ä¸¤ä¸ªç©ºè¡Œ
- ç±»æ–¹æ³•ä¹‹é—´ç”¨ä¸€ä¸ªç©ºè¡Œ
- å¤šç”¨ç©ºè¡Œåˆ†å‰²ä¸åŒçš„é€»è¾‘æ®µï¼Œå¢åŠ å¯è¯»æ€§

### æºä»£ç æ–‡ä»¶çš„ç¼–ç 

- å¯¹äº Python2.x æœ€å¥½åœ¨ç¬¬ä¸€è¡Œå£°æ˜ `coding=utf8`
- å¯¹äº Python3.x é»˜è®¤å°±æ˜¯ UTF-8 ç¼–ç 

### import

#### (1) å¯¼å…¥è¦æŒ‰é¡ºåºåˆ†ç»„

1. æ ‡å‡†åº“
2. ç¬¬ä¸‰æ–¹åº“
3. æœ¬åœ°æ¨¡å—

#### (2) ä¸æ¨èè¿ç»­çš„æ¨¡å—

- æ¨è

```BASH
import os
import sys
```

- ä¸æ¨è

```BASH
import os, sys
```

#### (3) import è¯­å¥çš„ä½ç½®

```BASH
"""
æ¨¡å—æ–‡æ¡£è¯´æ˜
"""

__all__ = ['a', 'b', 'c']
__version__ = '0.1'
__author__ = 'Tiger Huang'

import æ ‡å‡†åº“
import æ ‡å‡†åº“
import æ ‡å‡†åº“

import ç¬¬ä¸‰æ–¹åº“
import ç¬¬ä¸‰æ–¹åº“
import ç¬¬ä¸‰æ–¹åº“

import æœ¬åœ°æ¨¡å—
import æœ¬åœ°æ¨¡å—
import æœ¬åœ°æ¨¡å—

å…¨å±€å˜é‡
å…¨å±€å¸¸é‡

...
```

#### (4) é¿å…ä½¿ç”¨é€šé…ç¬¦ *ï¼Œè­¬å¦‚ import *

#### (5) from-import

`from-import` æ—¶å°½é‡ç»“æŸåœ¨æ¨¡å—ï¼Œè€Œä¸æ˜¯æ¨¡å—å†…çš„å†…å®¹ï¼Œè­¬å¦‚ `from a.b.c import c`ï¼Œc æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚
è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå½“ä»£ç å†™å¾—æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œä¸ä¼šå¿˜è®°æŸä¸ªå¯¹è±¡æ˜¯å±äºå“ªä¸ªæ¨¡å—çš„ï¼Œå°±ä¸éœ€è¦é¢‘ç¹è°ƒåˆ°æ–‡ä»¶å¤´éƒ¨å»çœ‹ import è¯­å¥äº†

## è¡¨è¾¾å¼å’Œè¯­å¥ä¸­çš„é€—å·

è¿™ä¸ªçš„æƒ…å†µå°±æ¯”è¾ƒå¤šå’Œæ‚äº†ï¼Œç›´æ¥çœ‹æ¡ˆä¾‹æœ€ç›´æ¥äº†

- æ¨è

```BASH
# case1
spam(ham[1], {eggs: 2})

# case2
if x == 4: print x, y; x, y = y, x

# case3
ham[1:9], ham[1:9:3], ham[:9:3], ham[1::3], ham[1:9:]
ham[lower:upper], ham[lower:upper:], ham[lower::step]
ham[lower+offset : upper+offset]
ham[: upper_fn(x) : step_fn(x)], ham[:: step_fn(x)]
ham[lower + offset : upper + offset]

# case4
spam(1)

# case5
dct['key'] = lst[index]

# case6
i = i + 1
submitted += 1
x = x*2 - 1
hypot2 = x*x + y*y
c = (a+b) * (a-b)

# case7
def complex(real, imag=0.0):
    return magic(r=real, i=imag)
    
# case8
if foo == 'blah':
    do_blah_thing()
do_one()
do_two()
do_three()
```

- ä¸æ¨è

```BASH
# case1
spam( ham[ 1 ], { eggs: 2 } )

# case2
if x == 4 : print x , y ; x , y = y , x

# case3
ham[lower + offset:upper + offset]
ham[1: 9], ham[1 :9], ham[1:9 :3]
ham[lower : : upper]
ham[ : upper]

# case4
spam (1)

# case5
dct ['key'] = lst [index]

# case6
i=i+1
submitted +=1
x = x * 2 - 1
hypot2 = x * x + y * y
c = (a + b) * (a - b)

# case7
def complex(real, imag = 0.0):
    return magic(r = real, i = imag)
    
# case8
if foo == 'blah': do_blah_thing()
do_one(); do_two(); do_three()
```

## å‘½åè§„èŒƒ

- å–æœ‰æ„ä¹‰çš„åå­—
- ç±»åå­—ç”¨é¦–å­—æ¯å¤§å†™çš„é©¼å³°å‘½åæ³•
- å¸¸é‡ç”¨å¤§å†™åŠ ä¸‹åˆ’çº¿åˆ†å‰²
- å…¶ä»–å‘½åå°å†™åŠ ä¸‹åˆ’çº¿åˆ†å‰²
- å•ä¸‹åˆ’çº¿å¼€å¤´çš„å¯¹è±¡ä»£è¡¨æ¨¡å—çš„ç§æœ‰æˆå‘˜
- åŒä¸‹åˆ’çº¿å¼€å¤´çš„å¯¹è±¡ä»£è¡¨ç±»çš„ç§æœ‰æˆå‘˜
- åŒä¸‹åˆ’çº¿å¼€å¤´å¹¶ä¸”ç»“å°¾çš„å¯¹è±¡ä»£è¡¨é­”æœ¯æˆå‘˜
- è‡ªå®šä¹‰å¼‚å¸¸ç±»ä¸€èˆ¬ç”¨ Error åç¼€
- ç”¨ self ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°åå­—
- ç”¨ cls ä½œä¸ºç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°åå­—

## pylint

pylint æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ä»£ç é™æ€æ‰«æå·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒã€æ˜¯å¦å­˜åœ¨æ½œåœ¨çš„é—®é¢˜ç­‰ï¼Œæœ€åè¿˜ä¼šç»™æ£€æŸ¥æŠ¥å‘Šæ‰“åˆ†ã€‚
è¿™ä¸ªå·¥å…·å¯ä»¥é…åˆ CI/CD ä½¿ç”¨ï¼Œè­¬å¦‚ï¼Œå¦‚æœæ£€æŸ¥æŠ¥å‘Šå¾—åˆ†ä½äºæŸä¸ªåˆ†æ•°ï¼Œåˆ™ä¸å…è®¸èµ°åç»­çš„æ›´æ–°å‘å¸ƒæµç¨‹

ç›´æ¥ pip å®‰è£…å³å¯ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š

```BASH
lab) tmp â¤ pylint demo1.py
************* Module tmp.demo1
demo1.py:1:0: C0114: Missing module docstring (missing-module-docstring)
demo1.py:1:0: C0116: Missing function or method docstring (missing-function-docstring)
demo1.py:8:13: W0621: Redefining name 'c' from outer scope (line 15) (redefined-outer-name)
demo1.py:8:0: C0103: Argument name "c" doesn't conform to snake_case naming style (invalid-name)
demo1.py:8:0: C0116: Missing function or method docstring (missing-function-docstring)
demo1.py:15:4: C0103: Constant name "c" doesn't conform to UPPER_CASE naming style (invalid-name)

------------------------------------------------------------------
Your code has been rated at 5.38/10 (previous run: 5.38/10, +0.00)
```

æ£€æŸ¥æŠ¥å‘Šæœ‰å››ä¸ªè­¦å‘Šçº§åˆ«ï¼ˆçº§åˆ«ä»é«˜åˆ°ä½æ’åºï¼‰ï¼šerrorï¼ˆé”™è¯¯ï¼‰ï¼Œwarningï¼ˆè­¦å‘Šï¼‰ï¼Œrefactorï¼ˆå¯ä»¥é‡æ„çš„ç‚¹ï¼‰ï¼Œconventionï¼ˆä¸ç¬¦åˆè§„èŒƒï¼‰

rated at 5.38/10 å°±æ˜¯æ‰“åˆ†ç»“æœï¼Œæ„æ€æ˜¯æ»¡åˆ† 10 åˆ†ï¼Œæˆ‘çš„æ¨¡å—å¾—äº† 5.38 åˆ†

å°½ä¿¡ä¹¦ä¸å¦‚æ— ä¹¦ï¼Œå¯¹äº Pythonï¼Œæ¯ä¸ªå›¢é˜Ÿã€ä¸ªäººå¯¹è§„èŒƒçš„çœ‹æ³•å’Œç†è§£å¯èƒ½ä¸ä¸€æ ·ã€‚pylint ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™ï¼Œè­¬å¦‚å…è®¸é»˜è®¸æ¨¡å—çº§åˆ«çš„æ–‡æ¡£ï¼Œ
ä¹Ÿå°±æ˜¯æƒ³æŠŠæŠ¥å‘Šä¸­çš„ `demo1.py:1:0: C0114: Missing module docstring (missing-module-docstring)` å»æ‰ï¼Œå¯ä»¥è¿™æ ·åšï¼š


1. ç”Ÿæˆè‡ªå®šä¹‰é…ç½®æ–‡ä»¶
   ```BASH
   pylint --persistent=n --generate-rcfile > pylint.conf
   ```
2. åˆ°é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸€å¿«
    ```BASH
    [MESSAGES CONTROL]
        disable=...
    ```
3. æŠŠ missing-module-docstring åŠ åˆ° disable çš„æœ«å°¾
4. æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¹¶é‡æ–°æ‰§è¡Œæ‰«ææ£€æŸ¥
    ```BASH
    (lab) tmp â¤ pylint --rcfile ./pylint.conf demo1.py
    ************* Module tmp.demo1
    demo1.py:1:0: C0116: Missing function or method docstring (missing-function-docstring)
    demo1.py:8:13: W0621: Redefining name 'c' from outer scope (line 15) (redefined-outer-name)
    demo1.py:8:0: C0103: Argument name "c" doesn't conform to snake_case naming style (invalid-name)
    demo1.py:8:0: C0116: Missing function or method docstring (missing-function-docstring)
    demo1.py:15:4: C0103: Constant name "c" doesn't conform to UPPER_CASE naming style (invalid-name)
    
    ------------------------------------------------------------------
    Your code has been rated at 6.15/10 (previous run: 5.38/10, +0.77)
   ```
   
ä¹‹å‰ missing-module-docstring çš„è­¦å‘Šæ²¡äº†ï¼Œå¹¶ä¸”å¾—åˆ†ä¹Ÿæé«˜äº†

## å‚è€ƒ

- [å®˜ç½‘ PEP8](https://www.python.org/dev/peps/pep-0008/#introduction)
- [pylint å®˜ç½‘](https://docs.pylint.org/en/1.6.0/tutorial.html)
- [pylint åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨](https://www.jianshu.com/p/c0bd637f706d)
- [How do I disable â€œmissing docstringâ€ warnings at a file-level in Pylint?](https://stackoverflow.com/questions/7877522/how-do-i-disable-missing-docstring-warnings-at-a-file-level-in-pylint)
