# åŸºç¡€ç±»åž‹

## æ•´åž‹

### æ•´åž‹æŒ‡çš„å®šä¹‰

æ•´åž‹æŒ‡çš„æ˜¯è´Ÿæ•´æ•°ã€0ã€æ­£æ•´æ•°ï¼Œåº•å±‚æ˜¯ C å®žçŽ°ã€‚Python2.x ä¼šç”¨ `long` ç±»åž‹æ¥å­˜å‚¨å¤§æ•´åž‹ï¼Œè€Œ Python3.x åªç”¨ `int` ä¸€ç§ç±»åž‹å­˜å‚¨æ•´åž‹ï¼Œæ— è®ºå¤§å°

### ä¸åŒè¿›åˆ¶çš„æ•´åž‹è¡¨ç¤ºæ³•

- äºŒè¿›åˆ¶ 0b...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `bin()`
- å…«è¿›åˆ¶ 0o...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `oct()`
- åå…­è¿›åˆ¶ 0x...ï¼Œè½¬æ¢å‡½æ•°æ˜¯ `hex()` 

### ç”¨åˆ†éš”ç¬¦å¢žå¼ºå¯è¯»æ€§

ä»Ž Python3.x å¼€å§‹æ”¯æŒç”¨ `_` æ¥åˆ†å‰²å¾ˆé•¿çš„æ•´åž‹ï¼Œå¢žåŠ å¯è¯»æ€§ï¼Œå¦‚ï¼š`a = 1_000_000_000_000_000_000_000`

### æ›´è¿›ä¸€æ­¥

#### å°æ•´åž‹å¯¹è±¡

Python ä¸­çš„ int å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”ä¸€ä¸ª C çš„æ•°æ®ç»“æž„ï¼Œè€Œä¸” Python çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åœ¨å †ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šåªè¦åˆ›å»ºä¸€æ¬¡
æ•´åž‹ï¼Œå°±éœ€è¦ç›¸åº”çš„ `malloc` å’Œ `free`ï¼Œè¿™äº›æ“ä½œå¦‚æžœè¿‡äºŽé¢‘ç¹ä¼šé™ä½Žç¨‹åºçš„æ•ˆçŽ‡ã€‚å¯¹äºŽ [-5, 257) è¿™ä¸ªèŒƒå›´çš„å°æ•´åž‹ï¼Œ
Python çš„è®¾è®¡è€…ä»¬è€ƒè™‘åˆ°å®ƒä»¬å¯èƒ½ä¼šè¢«é¢‘ç¹çš„ä½¿ç”¨ï¼Œå› æ­¤ï¼ŒPython è¿è¡Œæ—¶ä¼šåœ¨ä¸€å¼€å§‹å°±åˆ›å»ºå¥½è¿™äº›æ•´åž‹æ•°å­—å¯¹åº”çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ”¾åˆ°ä¸€ä¸ªç¼“å­˜æ± ä¸­ï¼Œ
æ¯æ¬¡éœ€è¦çš„æ—¶å€™ï¼Œå†ä»Žæ± ä¸­èŽ·å–ï¼Œä»¥æ­¤æ¥å‡å°‘ `malloc`ã€`free`ã€Python å¯¹è±¡çš„å›žæ”¶çš„æ¬¡æ•°ï¼Œæå‡ Python çš„æ•´ä½“æ€§èƒ½ï¼ˆè™½ç„¶ Python çš„æ€§èƒ½è€è¢«åæ§½ï¼Œä½†æ˜¯è¿™äº›ä¼˜åŒ–ç»†èŠ‚è¿˜æ˜¯ä¸å°‘çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºæ•´åž‹çš„ ID éƒ½ä¸€æ ·çš„åŽŸå› ï¼‰

#### å¤§æ•´åž‹å¯¹è±¡ 

å› ä¸ºä¸å¯èƒ½ä¸ºæ¯ä¸€ä¸ªæ•´åž‹éƒ½é¢„å…ˆåˆ›å»ºå¥½å¯¹è±¡ï¼Œæ‰€ä»¥ä¸åœ¨ [-5, 257) è¿™ä¸ªèŒƒå›´çš„æ•´åž‹å¹¶ä¸ä¼šé¢„å…ˆåˆ›å»ºã€‚Python å¯¹å¤§æ•´åž‹å¯¹è±¡çš„ä¼˜åŒ–æ–¹æ³•æ˜¯é¢„å…ˆåˆ’åˆ†å‡ºä¸€å—å†…å­˜ç©ºé—´ï¼Œ
ä¸“é—¨ç”¨äºŽå¤§æ•´åž‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ä¸èƒ½é¢„å…ˆåˆ›å»ºå¥½ï¼Œä½†æ˜¯å†…å­˜æ± è¯¥ä¸Šè¿˜æ˜¯ä¸Šäº†

## æµ®ç‚¹åž‹

æµ®ç‚¹ç±»åž‹åº•å±‚æ˜¯ C å®žçŽ°

### æµ®ç‚¹åž‹çš„è®¡ç®—

ç”±äºŽå°æ•°ç‚¹åŽçš„éƒ¨åˆ†åœ¨è½¬æ¢æˆäºŒè¿›åˆ¶æ—¶å¾ˆå¯èƒ½ä¼šæ˜¯ä¸€ä¸²æ— é™å¾ªçŽ¯çš„å°æ•°ï¼Œå› æ­¤å¯¼è‡´ä¸èƒ½ç²¾å‡†è¡¨ç¤ºï¼Œæ‰€ä»¥æµ®ç‚¹çš„è®¡ç®—ä¸€èˆ¬æ˜¯ä¸ç²¾ç¡®çš„

æ¡ˆä¾‹ï¼š

```bash
In [91]: a = 0.29

In [92]: b = 0.29 * 100

In [93]: c = int(b)

In [94]: c
Out[94]: 28
```

æ˜¾ç„¶ä¸æ˜¯é¢„æœŸçš„ç»“æžœ

#### è½¬æ¢æˆåˆ†æ•°è®¡ç®—

ä½¿ç”¨ fractions æ¨¡å—å°†å°æ•°è¿ç®—è½¬æ¢æˆåˆ†æ•°è¿ç®—

```bash
In [112]: from fractions import Fraction

In [113]: a = Fraction(29) / Fraction(100)
In [114]: b = a * 100
In [115]: c = int(b)

In [116]: c
Out[116]: 29
```

#### è½¬æ¢æˆå®šç‚¹æ•°è¿ç®—

ä½¿ç”¨ decimal æ¨¡å—è¿›è¡Œæµ®ç‚¹åž‹è¿ç®—

```bash
In [117]: from decimal import Decimal

In [118]: a = Decimal("0.29")
In [119]: b = a * 100
In [120]: c = int(b)

In [121]: c
Out[121]: 29
```

decimal è¿˜å¯ä»¥æŒ‡å®šç»“æžœä¿ç•™çš„ä¸ªæ•°ï¼Œé»˜è®¤å››èˆäº”ã€‚åˆ†ä¸¤ç§æƒ…å†µï¼Œå½“ç»“æžœå°æ•°ç‚¹å‰éž 0 æ—¶ï¼Œä¿ç•™çš„ä¸ªæ•°åŒ…æ‹¬æ•´æ•°ä½çš„ä¸ªæ•°ï¼Œå¦‚ä¸‹ï¼š

```BASH
In [130]: import decimal
     ...:
     ...: decimal.getcontext().prec = 5
     ...:
     ...:
     ...: division = decimal.Decimal(77) / decimal.Decimal(3)
     ...: print(division)
25.667
```

å½“å°æ•°ç‚¹å‰æ˜¯ 0 æ—¶ï¼Œç»“æžœä¿ç•™ä¸ªæ•°åªåŒ…æ‹¬å°æ•°ä½çš„ä¸ªæ•°ï¼Œå¦‚ä¸‹ï¼š

```BASH
In [4]: import decimal

In [5]: decimal.getcontext().prec = 5
In [6]: division = decimal.Decimal(1) / decimal.Decimal(3)

In [7]: print(division)
0.33333
```

### round() çš„é™·é˜±

æ¡ˆä¾‹ï¼š

```BASH
In [46]: round(11.485, 2)
Out[46]: 11.48
```

é¢„æœŸç»“æžœæ˜¯ 11.49ã€‚åŽŸå› æ˜¯å½“å°æ•°çš„æœ«å°¾æ˜¯ 5ï¼Œè€Œ `round()` åˆšå¥½ä½¿ç”¨æœ«å°¾çš„ 5 è¿›è¡Œå››èˆäº”å…¥æ—¶ï¼Œå°†ä¸ä¼šè¿›è¡Œã€Œäº”å…¥ã€

å¯ä»¥ä½¿ç”¨ decimal æ¨¡å—ä¿®å¤è¿™ç§é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š 

```BASH
In [1]: import decimal

In [2]: res = round(13.485, 2)
In [3]: correct_res = decimal.Decimal(res).quantize(decimal.Decimal('0.00'), rounding=decimal.ROUND_UP)

In [4]: print(correct_res)
13.49
```

## å¸ƒå°”ç±»åž‹

å¸ƒå°”ç±»åž‹åº•å±‚æ˜¯ C å®žçŽ°

### åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º

æ¯”è¾ƒ Pythonic çš„å†™æ³•æ˜¯ï¼š

```python
lst = []
if not lst:
    print("list is empty")  
```

æ˜¾å¼å†™æ³•æ˜¯ï¼š

```python
lst = []
if len(lst) == 0:
    print("list is empty")
```

## å­—ç¬¦ä¸²ç±»åž‹

åº•å±‚æ˜¯ C å®žçŽ°

### Unicode è¡¨ç¤º

Python3.x çš„å­—ç¬¦ä¸²éƒ½æ˜¯ Unicode ç±»åž‹ï¼Œå…·ä½“æ¥è¯´å†…éƒ¨ä½¿ç”¨äº†ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥è¡¨ç¤º Unicodeï¼š

- Latin-1 ç¼–ç ï¼šå¦‚æžœå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½åœ¨ ASCII èŒƒå›´å†…ï¼Œåˆ™ä½¿ç”¨è¯¥ç¼–ç 
- UCS-2 ç¼–ç ï¼šå¤§å¤šæ•°çš„éžæ‹‰ä¸ç³»çš„å­—ç¬¦ï¼ˆè­¬å¦‚ï¼šæ±‰è¯­ã€æ—¥è¯­ç­‰ï¼‰ï¼Œéƒ½ä¼šä½¿ç”¨è¯¥ç¼–ç 
- UCS-4 ç¼–ç ï¼šå¦‚æžœå­—ç¬¦ä¸²ä¸­å«æœ‰ç‰¹æ®Šå­—ç¬¦ã€emojiã€ç¨€æœ‰å­—ç¬¦ç­‰ï¼Œåˆ™ä¼šä½¿ç”¨è¯¥ç¼–ç 

**å­—ç¬¦ä¸²æ‰©å®¹è§„åˆ™ï¼šå¦‚æžœä¸€ä¸ª Latin-1 ç¼–ç çš„å­—ç¬¦ä¸²åŠ å…¥äº†ä¸€ä¸ªä¸­æ–‡ï¼Œé‚£ä¹ˆåŽŸå…ˆçš„ Latin-1 å­—ç¬¦ä¸²æ‰€å çš„å­—èŠ‚æ•°å°†ä¼šå¢žåŠ  2 å€ã€‚åŒç†ï¼Œå¦‚æžœåŠ å…¥äº†ä¸€ä¸ª emoji è¡¨æƒ…ï¼Œ
æ‰€å çš„å­—èŠ‚å°†ä¼šå¢žåŠ  4 å€**

éªŒè¯ âœ… ï¼š

```BASH
In [44]: import sys

In [45]: string1="hello"
In [46]: print(sys.getsizeof(string1) - sys.getsizeof(""))
5

In [47]: string2="å®‰"
In [48]: print(sys.getsizeof(string2) - sys.getsizeof(""))
27

In [49]: string3 = string1 + string2
In [50]: print(sys.getsizeof(string3) - sys.getsizeof(""))
37  # 5*2+27=37
```

```BASH
In [51]: import sys

In [52]: string1="hello"
In [53]: print(sys.getsizeof(string1) - sys.getsizeof(""))
5

In [54]: string2="ðŸ˜„"
In [55]: print(sys.getsizeof(string2) - sys.getsizeof(""))
31

In [56]: string3 = string1 + string2
In [57]: print(sys.getsizeof(string3) - sys.getsizeof(""))
51  # 5*4+31=51
```

> å¦‚æžœåœ¨ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ä¸­åŠ å…¥äº†ä¸€ä¸ª emoji å­—ç¬¦ï¼Œå†…å­˜çš„æ¶ˆè€—å¯èƒ½ä¼šå¤§å¤§å¢žåŠ 

### ä¸ºä»€ä¹ˆä¸ç”¨ UTF-8 è¡¨ç¤º

UTF-8 ä¸æ˜¯ä¸€ç§å®šé•¿çš„ç¼–ç æ–¹å¼ï¼Œä¼šæ ¹æ®æ¯ä¸ªå­—ç¬¦çš„å®žé™…æ‰€éœ€åŽ»åˆ†é…å­—èŠ‚æ•°ï¼Œè¿™æ ·ä¼šé€ æˆå­—ç¬¦ä¸²æ— æ³•æ ¹æ®ç´¢å¼•å¿«é€Ÿè®¿é—®ç›¸åº”å­—ç¬¦ã€‚è­¬å¦‚ `string="abcdðŸ˜„"`ï¼Œ
`string[0]`ã€`string[1]`ã€`string[2]`ã€`string[3]` éƒ½å¯ä»¥è®¿é—®åˆ°ç›¸åº”çš„å­—ç¬¦ï¼Œä½†æ˜¯ç”±äºŽ ðŸ˜„ å ç”¨äº† 4 ä¸ªå­—èŠ‚ï¼Œå°±ä¸èƒ½é€šè¿‡ `string[4]` è®¿é—®åˆ°äº†ï¼Œ
è€Œä¸”ç”±äºŽæ˜¯å˜é•¿ï¼Œæ²¡åŠžæ³•é¢„çŸ¥ç´¢å¼•çš„æ‰©å¤§è§„å¾‹

è€Œå¦‚æžœæŒ‰ç…§çŽ°å®žä¸­å­—ç¬¦ä¸²çš„æ‰©å®¹è§„åˆ™ï¼Œ`string` å˜é‡çš„å‰ 4 ä¸ªå­—ç¬¦æ‰€å çš„å­—èŠ‚éƒ½ä¼šå¢žåŠ  4 å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç´¢å¼•è®¿é—®çš„æ—¶å€™å¯ä»¥æœ‰è§„å¾‹çš„ *4 åŽ»è®¿é—®ï¼Œä¹Ÿå°±å¯ä»¥å®žçŽ°äº†ç´¢å¼•è®¿é—®çš„åŠŸèƒ½

### intern æœºåˆ¶

ç±»ä¼¼å°æ•´åž‹å¯¹è±¡ï¼Œå¯¹äºŽ ASCII å­—ç¬¦ä¸²ï¼Œå¦‚æžœé•¿åº¦æ²¡æœ‰è¶…è¿‡20ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«æ”¾åˆ°ç¼“å­˜æ± ä¸­ï¼Œä»¥ä¾›åŽç»­çš„ä½¿ç”¨

> Java ä¸­çš„å­—ç¬¦ä¸²ç±»åž‹ä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶

### å­—ç¬¦ä¸²çš„ + æ‹¼æŽ¥

ç”±äºŽå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜æ¯”å¯¹è±¡ï¼Œå½“ä½¿ç”¨ `+` è¿›è¡Œæ‹¼æŽ¥æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¯¹åº”çš„åº•å±‚ C æ•°æ®ç»“æž„ä¹Ÿè¦è¿›è¡Œ `malloc`ã€`free`ã€å­—ç¬¦ä¸²æ‹·è´ç­‰æ“ä½œï¼Œ
å¦‚æžœæ‹¼æŽ¥çš„æ¬¡æ•°å¾ˆå¤šçš„è¯ï¼Œå¯¹æ€§èƒ½ä¼šæœ‰ä¸€å®šçš„æ¶ˆè€—ã€‚å®˜æ–¹æŽ¨èçš„è§£å†³æ–¹æ³•æ˜¯ï¼Œå…ˆç”¨ `list` æˆ–è€… `tuple` å­˜å‚¨éœ€è¦æ‹¼æŽ¥çš„å­—ç¬¦ä¸²ï¼Œç„¶åŽé€šè¿‡ `join()` æ–¹æ³•è¿›è¡Œæ‹¼æŽ¥ï¼Œè¿™æ ·ä¼šå…ˆç»Ÿè®¡æ‰€éœ€çš„å­—èŠ‚æ•°ï¼Œ
ç„¶åŽç”³è¯·ä¸€æ¬¡å†…å­˜ï¼Œå†åšä¸€æ¬¡å­—ç¬¦ä¸²æ‹·è´

> Java è²Œä¼¼ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜

### å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•

åœ¨å¤„ç†å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼˜å…ˆåˆ° [è¿™é‡Œ](https://docs.python.org/3/library/stdtypes.html#string-methods) æ‰¾ï¼Œæ²¡æœ‰å†æ‰¾ç¬¬ä¸‰æ–¹æˆ–è€…è€ƒè™‘é€ è½®å­ 

## å­—èŠ‚æ•°ç»„ç±»åž‹

### å­—èŠ‚æ•°ç»„ç±»åž‹çš„å®šä¹‰

`bytes` æ˜¯æŒ‡å­˜å‚¨å•å…ƒæ˜¯å­—èŠ‚çš„æ•°ç»„ï¼Œåº•å±‚æ˜¯ C å®žçŽ°ï¼Œæ˜¯ Python3.x æ–°å¢žçš„ç±»åž‹ï¼Œé™¤äº†å­˜å‚¨å•å…ƒä¸åŒä¹‹å¤–ï¼Œå’Œ `str` æ‰€æ”¯æŒçš„ [æ“ä½œ](https://docs.python.org/3/library/stdtypes.html#bytes-and-bytearray-operations)
åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„

### ç¼–ç å’Œè§£ç 

å­—ç¬¦é›†çš„ä½œç”¨ï¼šåœ°çƒä¸Šæœ‰å¾ˆå¤šè¯­è¨€ï¼Œè¿™äº›è¯­è¨€éœ€è¦ä¸­é—´æ˜ å°„è¡¨ï¼Œç”¨æ¥å°†çŽ°å®žä¸–ç•Œä¸­çš„è¯­è¨€æ˜ å°„æˆç›¸åº”çš„å­—èŠ‚ï¼Œè¿™ä¸ªæ˜ å°„è¡¨å°±æ˜¯å­—ç¬¦é›†ã€‚
ä¸€å¼€å§‹å„è‡ªä¸ºæˆ˜ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦é›†ï¼ŒåŽæ¥ä¸ºäº†è§£å†³ä¸åŒè¯­è¨€ä¹‹é—´çš„ç¼–ç é—®é¢˜ï¼Œå‘å±•å‡ºç»Ÿä¸€çš„å­—ç¬¦é›†ï¼Œå¯ä»¥å›Šæ‹¬ä¸–ç•Œä¸Šç»å¤§éƒ¨åˆ†çš„è¯­è¨€ï¼Œ
æ¯”å¦‚ UTF-8 å°±æ˜¯å…¶ä¸­ä¸€ç§ï¼Œåœ¨ UTF-8 ä¸­ä¸€ä¸ªè‹±æ–‡å­—ç¬¦ç­‰äºŽä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡ç­‰äºŽä¸‰ä¸ªå­—èŠ‚ã€‚

`str`ã€`bytes`ã€äºŒè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š

![](https://raw.githubusercontent.com/hsxhr-10/Blog/master/image/python-1.png)

æ¡ˆä¾‹ï¼š

ä¸­æ–‡é‡Œé¢çš„ã€Œå®‰ã€å­—ï¼Œåˆ°è®¡ç®—æœºäºŒè¿›åˆ¶çš„è¿‡ç¨‹

```BASH
"å®‰".encode("utf8") --> b'\xe5\xae\x89'ï¼ˆä¹Ÿå°±æ˜¯ UTF-8 ç¼–ç çš„åå…­è¿›åˆ¶ E5AE89ï¼‰--> 111001011010111010001001ï¼ˆäºŒè¿›åˆ¶ï¼‰
```
